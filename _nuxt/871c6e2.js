(window.webpackJsonp=window.webpackJsonp||[]).push([[11,14],{195:function(e,t,n){"use strict";n.r(t);var r={data:function(){return{headerOverlay:!1,head:{title:"",description:""}}},watch:{headerOverlay:function(e,t){this.$root.$emit("headerOverlay",e)}},mounted:function(){this.$root.$emit("headerOverlay",this.headerOverlay)},head:function(){return{title:this.head.title,meta:[{hid:"description",name:"description",content:this.head.description}]}}},o=n(4),component=Object(o.a)(r,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null);t.default=component.exports},222:function(e,t,n){"use strict";function r(){return new Worker(n.p+"ab58597.worker.js")}n.d(t,"a",(function(){return r}))},223:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(35),n(15),n(21),n(38),n(36),n(37),n(96),n(97),n(224),n(27),n(210);var r=n(194);function o(e,t,n,o,c,l){var d={boids:[]},h=new r.StandardMaterial("debug_center",t);h.diffuseColor=r.Color3.FromHexString("#FF00FF"),d.center=r.MeshBuilder.CreateSphere("center",{diameter:.1,segments:8}),d.center.material=h;var f=new r.StandardMaterial("debug_bbox",t);f.emissiveColor=r.Color3.FromHexString("#00FF00"),f.disableLighting=!0,f.wireframe=!0,d.bbox=r.MeshBuilder.CreateBox("boids_bbox",{},t),d.bbox.scaling.x=Math.abs(c.x-o.x),d.bbox.scaling.y=Math.abs(c.y-o.y),d.bbox.scaling.z=Math.abs(c.z-o.z),d.bbox.position=o.add(c.subtract(o).scale(.5)),d.bbox.material=f;var m=new r.StandardMaterial("debug_wireframe",t);m.diffuseColor=r.Color3.FromHexString("#FFFFFF"),m.wireframe=!0,d.influenceMesh=r.MeshBuilder.CreateSphere("boid_influence_".concat(e),{diameter:l,segments:8}),d.influenceMesh.material=m,d.influenceMatrices=new Float32Array(16*n.length);for(var i=0;i<n.length;i++){r.Matrix.IdentityReadOnly.copyToArray(d.influenceMatrices,16*i),i++,d.boids.push({})}return d.influenceMesh.thinInstanceSetBuffer("matrix",d.influenceMatrices,16),d}},228:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n(217);var r=n(96),o=n(97),c=n(220),l=n(221),d=n(218),h=n(194);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var m=function(e){Object(c.a)(n,e);var t=f(n);function n(e,o){var c,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(r.a)(this,n),(c=t.call(this,e,"/oceanPostProcess",["time","fov","resolution","cameraPosition","cameraRotation","worldScale","lightDirection"],["positionSampler","reflectionSampler","refractionSampler","skyTexture"],{width:l.width||o.getEngine().getRenderWidth(),height:l.height||o.getEngine().getRenderHeight()},l.isPipeline?null:o,h.Texture.TRILINEAR_SAMPLINGMODE,o.getEngine(),!1))._time=0,c.worldScale=1,c._cameraRotation=h.Vector3.Zero(),c._cameraViewMatrix=h.Matrix.Identity(),c._reflectionEnabled=!1,c._refractionEnabled=!1,c._skyTexture=null,c._camera=o,c._options=l,c.reflectionTexture=null,c.refractionTexture=null,c._geometryRenderer=o.getScene().enableGeometryBufferRenderer(1),c.light="light"in l?l.light:null,c._geometryRenderer&&c._geometryRenderer.isSupported?c._geometryRenderer.enablePosition=!0:c.updateEffect("#define NOT_SUPPORTED\n"),c.onApply=function(e){if(c._geometryRenderer&&c._geometryRenderer.isSupported){var t=o.getEngine(),n=o.getScene();c._time+=.001*t.getDeltaTime(),e.setFloat("time",c._time);e.setVector2("resolution",new h.Vector2(t.getRenderWidth()/1,t.getRenderHeight()/1)),n&&(e.setVector3("cameraPosition",o.globalPosition),c._computeCameraRotation(o),e.setVector3("cameraRotation",c._cameraRotation),e.setVector3("lightDirection",c.light?c.light.direction:new h.Vector3(.2,-1,0)),e.setFloat("fov",o.fov),e.setFloat("worldScale",c.worldScale),e.setTexture("positionSampler",c._geometryRenderer.getGBuffer().textures[2]),c._reflectionEnabled&&e.setTexture("reflectionSampler",c.reflectionTexture),c._refractionEnabled&&e.setTexture("refractionSampler",c.refractionTexture),c._skyTexture&&e.setTexture("skyTexture",c._skyTexture))}},c}return Object(o.a)(n,[{key:"reflectionEnabled",get:function(){return this._reflectionEnabled},set:function(e){if(this._reflectionEnabled!==e){this._reflectionEnabled=e,e&&!this.reflectionTexture&&(this.reflectionTexture=new h.MirrorTexture("oceanPostProcessReflection",this._options.reflectionSize||{width:512,height:512},this._camera.getScene()),this.reflectionTexture.mirrorPlane=h.Plane.FromPositionAndNormal(h.Vector3.Zero(),new h.Vector3(0,-1,0))),this.updateEffect(this._getDefines());var t=this.getCamera().getScene().customRenderTargets;if(e)t.push(this.reflectionTexture);else{var n=t.indexOf(this.reflectionTexture);-1!==n&&t.splice(n,1)}}}},{key:"refractionEnabled",get:function(){return this._refractionEnabled},set:function(e){if(this._refractionEnabled!==e){this._refractionEnabled=e,e&&!this.refractionTexture&&(this.refractionTexture=new h.RenderTargetTexture("oceanPostProcessRefraction",this._options.refractionSize||{width:512,height:512},this._camera.getScene())),this.updateEffect(this._getDefines());var t=this.getCamera().getScene().customRenderTargets;if(e)t.push(this.refractionTexture);else{var n=t.indexOf(this.refractionTexture);-1!==n&&t.splice(n,1)}}}},{key:"skyTexture",set:function(e){this._skyTexture=e,this.updateEffect(this._getDefines())}},{key:"isSupported",get:function(){return null!==this._geometryRenderer&&this._geometryRenderer.isSupported}},{key:"_getDefines",value:function(){var e=[];return this._reflectionEnabled&&e.push("#define REFLECTION_ENABLED"),this._refractionEnabled&&e.push("#define REFRACTION_ENABLED"),this._skyTexture&&e.push("#define SKY_ENABLED"),e.join("\n")}},{key:"_computeCameraRotation",value:function(e){e.upVector.normalize();var t=e.getTarget();e._initialFocalDistance=t.subtract(e.position).length(),e.position.z===t.z&&(e.position.z+=h.Epsilon);var n=t.subtract(e.position);e._viewMatrix.invertToRef(this._cameraViewMatrix),this._cameraRotation.x=Math.atan(this._cameraViewMatrix.m[6]/this._cameraViewMatrix.m[10]),n.x>=0?this._cameraRotation.y=-Math.atan(n.z/n.x)+Math.PI/2:this._cameraRotation.y=-Math.atan(n.z/n.x)-Math.PI/2,this._cameraRotation.z=0,isNaN(this._cameraRotation.x)&&(this._cameraRotation.x=0),isNaN(this._cameraRotation.y)&&(this._cameraRotation.y=0),isNaN(this._cameraRotation.z)&&(this._cameraRotation.z=0)}}]),n}(h.PostProcess)},249:function(e,t,n){var content=n(341);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(34).default)("2471f39a",content,!0,{sourceMap:!1})},336:function(e,t,n){"use strict";n.r(t),t.default="#ifdef CAUSTIC\n\n#define TAU 6.28318530718\n#define MAX_ITER 5\n#define SPEED 0.3\n#define SCALE 30.0\n#define FOG_DENSITY 2.2\n#define FOG_DISTANCE_CORRECTION 2.5 // move the far plane closer\nconst vec3 COLOR_INFINITE = vec3(0.0, 0.5, 0.85);\n\n#define csb(f, con, sat, bri) mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), f*bri)), f*bri, sat), con)\n\nfloat fogFactorExp(\n  const float dist,\n  const float density\n) {\n  return 1.0 - clamp(exp2(-density * dist), 0.0, 1.0);\n}\n\nvec4 caustic(vec2 uv) {\n  vec2 p = mod(uv*TAU, TAU)-250.0;\n  float t = time * SPEED + 23.0;\n\n  vec2 i = vec2(p);\n  float c = 1.0;\n  float inten = .005;\n\n  for (int n = 0; n < MAX_ITER; n++) {\n    float t = t * (1.0 - (3.5 / float(n+1)));\n    i = p + vec2(cos(t - i.x) + sin(t + i.y), sin(t - i.y) + cos(t + i.x));\n    c += 1.0/length(vec2(p.x / (sin(i.x+t)/inten),p.y / (cos(i.y+t)/inten)));\n  }\n\n  c /= float(MAX_ITER);\n  c = 1.17-pow(c, 1.4);\n  vec3 color = vec3(pow(abs(c), 8.0));\n  color = clamp(color + vec3(0.0, 0.0, 0.0), 0.0, 1.0);\n\n  float alpha=0.5;\n  float contrast=0.0;\n  color = mix(color, vec3(1.0,1.0,1.0),contrast);\n  //color.a = alpha;\n  vec4 color4 = vec4(color,0.0);\n\n  return color4;\n}\n\n\n#endif\n"},337:function(e,t,n){"use strict";n.r(t),t.default="#define CAUSTIC_FOG\n\n#ifdef CAUSTIC\n\n  if (vPositionW.y < 0.0) {\n    float normalizedDistance = (gl_FragCoord.z / gl_FragCoord.w) / 100.0;\n    vec4 causticFinalColor = gl_FragColor;\n\n    // calculate the caustic\n    if (vNormalW.y > 0.0) {\n      vec2 causticCoord = vec2(fract(vPositionW.x/SCALE), fract(vPositionW.z/SCALE));\n      // scale by normal to make caustic less pronounced for more vertical faces.\n      vec4 caustic = clamp(caustic(causticCoord), 0.0, 1.0) * vNormalW.y;\n\n      causticFinalColor.rgb = mix(causticFinalColor.rgb, caustic.rgb, clamp(caustic.a * 0.5 * normalizedDistance, 0.2, 0.7)); // caustics + texture\n    }\n\n#ifdef CAUSTIC_FOG\n    float fogFactor = clamp(\n      fogFactorExp(normalizedDistance, FOG_DENSITY * FOG_DISTANCE_CORRECTION),\n      0.0,\n      1.0\n    );\n    causticFinalColor.rgb = mix(\n      causticFinalColor.rgb,\n      COLOR_INFINITE,\n      fogFactor\n    );\n#endif\n    // color, saturation, brightness\n    gl_FragColor.rgb = causticFinalColor.rgb;\n    // gl_FragColor.rgb = csb(causticFinalColor.rgb, 1.1, 1.05, 1.22);\n\n  }\n#endif\n"},338:function(e,t,n){"use strict";n.r(t),t.default="#ifdef CAUSTIC\n\n\n#endif\n"},339:function(e,t,n){"use strict";n.r(t),t.default="#ifdef CAUSTIC\n#endif\n"},340:function(e,t,n){"use strict";n(249)},341:function(e,t,n){var r=n(33)(!1);r.push([e.i,"#underwater[data-v-bc7bfc30]{height:100vh;width:100%;position:relative}#underwater-3d[data-v-bc7bfc30]{height:100vh;width:100vw}#underwater-debug[data-v-bc7bfc30]{top:30px;left:0;z-index:1000}#underwater-debug[data-v-bc7bfc30],#underwater-hud[data-v-bc7bfc30]{position:absolute;padding:10px;border-radius:10px;background:#000;color:#fff;text-align:right}#underwater-hud[data-v-bc7bfc30]{top:0;right:0;width:160px;height:220px;z-index:10;font-family:monospace}@media (max-width:640px){#underwater-hud[data-v-bc7bfc30]{width:120px;height:160px}}#underwater-hud span[data-v-bc7bfc30]{display:inline-block}#underwater-hud #underwater-hud-compass[data-v-bc7bfc30],#underwater-hud #underwater-hud-time[data-v-bc7bfc30]{margin-top:10px}#underwater-hud #underwater-hud-compass-value[data-v-bc7bfc30],#underwater-hud #underwater-hud-depth-value[data-v-bc7bfc30],#underwater-hud #underwater-hud-time-value[data-v-bc7bfc30]{line-height:.9;font-size:42px;font-family:monospace}@media (max-width:640px){#underwater-hud #underwater-hud-compass-value[data-v-bc7bfc30],#underwater-hud #underwater-hud-depth-value[data-v-bc7bfc30],#underwater-hud #underwater-hud-time-value[data-v-bc7bfc30]{font-size:24px}}#underwater-hud #underwater-hud-depth-ascent[data-v-bc7bfc30]{-ms-writing-mode:tb-rl;writing-mode:vertical-rl;font-size:13px}#underwater-hud #underwater-hud-compass-name[data-v-bc7bfc30],#underwater-hud #underwater-hud-depth-name[data-v-bc7bfc30],#underwater-hud #underwater-hud-time-name[data-v-bc7bfc30]{color:#4c70ff}#underwater-hud #underwater-hud-depth-unit[data-v-bc7bfc30],#underwater-hud #underwater-hud-time-unit[data-v-bc7bfc30]{vertical-align:top}.button-giant[data-v-bc7bfc30]{line-height:1.2em;border-radius:10px;font-size:32px;background:#004;color:#fff;text-align:center;padding:14px}#underwater-fullscreen[data-v-bc7bfc30]{position:absolute;top:20px;left:0;margin:0;z-index:1;max-width:80%}#underwater-instructions[data-v-bc7bfc30]{position:absolute;top:0;left:0;bottom:0;right:0;z-index:1000;color:#fff;display:flex;justify-content:center;align-items:center;background-color:rgba(0,0,0,.4);flex-direction:column;text-align:center;padding:20px}#underwater-instructions p[data-v-bc7bfc30]{font-size:200%}#underwater-settings[data-v-bc7bfc30]{position:absolute;top:0;left:0;padding:10px;z-index:1000;color:#fff;text-align:left}#underwater-settings svg[data-v-bc7bfc30]{cursor:pointer}",""]),e.exports=r},426:function(e,t,n){"use strict";n.r(t);var r=n(6),o=(n(47),n(332)),c=n(195),l=(n(217),n(21),n(38),n(96)),d=n(97),h=n(220),f=n(221),m=n(218),v=(n(36),n(15),n(37),n(333),n(74),n(75),n(35),n(40),n(27),n(39),n(70),n(71),n(210),n(194)),w=(n(206),n(335)),y=n(228),T=(n(223),n(222));function _(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(m.a)(e);if(t){var o=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var C=n(336),E=n(337),A=n(338),I=n(339),S=function(e,t,n){return new v.Vector3(e,t,n)},R=.6,k=function(e){Object(h.a)(n,e);var t=M(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e,"Caustic",200,{CAUSTIC:!0,NORMAL:!0}))._isEnabled=!1,r.markAllAsDirty=e._dirtyCallbacks[v.Constants.MATERIAL_AllDirtyFlag],r}return Object(d.a)(n,[{key:"isEnabled",get:function(){return this._isEnabled},set:function(e){this._isEnabled!==e&&(this._isEnabled=e,this._enable(this._isEnabled))}},{key:"prepareDefines",value:function(e,t,n){e.CAUSTIC=this._isEnabled,e.NORMAL|=this._isEnabled}},{key:"getClassName",value:function(){return"CausticPluginMaterial"}},{key:"getUniforms",value:function(){return{ubo:[{name:"time",size:1,type:"float"}],fragment:"#ifdef CAUSTIC\n            uniform float time;\n        #endif"}}},{key:"bindForSubMesh",value:function(e,t,r,o){this._isEnabled&&e.updateFloat("time",n.time)}},{key:"getCustomCode",value:function(e){return"fragment"===e?{CUSTOM_FRAGMENT_DEFINITIONS:C.default,CUSTOM_FRAGMENT_MAIN_END:E.default}:"vertex"===e?{CUSTOM_VERTEX_DEFINITIONS:A.default,CUSTOM_VERTEX_MAIN_END:I.default}:null}}]),n}(v.MaterialPluginBase);k.time=0;var O=function(){function e(t){var n=this;Object(l.a)(this,e),this.base="",this.vueComponent=null,this.engine=null,this.scene=null,this.camera=null,this.assetsManager=null,this.sunLight=null,this.oceanPostProcess=null,this.rebuildOceanTexture=!0,this.audioDiver=null,this.audioOcean=null,this.debugState=!1,this.animTour=null,v.GUI=w;var r=document.getElementById("underwater-3d");document.onfullscreenchange=function(e){t.isFullscreen=!!document.fullscreenElement},this.vueComponent=t,this.base=t.base;var o=document.getElementById("underwater-hud-depth-value"),c=document.getElementById("underwater-hud-time-value"),d=document.getElementById("underwater-hud-depth-ascent"),h=document.getElementById("underwater-hud-compass-value");this.bootScene(r,t),this.lights(),this.materials(),this.composer();var f=[this.loadTerrain(),this.loadMoreiaBarco(),this.loadDiverBoat(),this.loadMantas(),this.loadTurtle(),this.loadAudio()],m=this.loadBoidsModel(this.base+"models/","sargentinho.glb",300,new v.Vector3(-33.12,-21.2,12.19),new v.Vector3(-2.12,-11.2,42.19),new v.Quaternion.RotationAxis(new v.Vector3(1,0,0),Math.PI),[{from:1,to:30,name:"swim"}]);f.push(m.promise);var y=this.loadBoidsModel(this.base+"models/","salema.glb",1e3,new v.Vector3(-2.12,-23.2,32.19),new v.Vector3(32.12,-10.2,62.19),new v.Quaternion.RotationAxis(new v.Vector3(-1,0,0),Math.PI/2),[{from:1,to:30,name:"swim"}]);f.push(y.promise),Promise.all(f).then((function(){console.log("all loaded")})),this.assetsManager.load(),t.$route.query.debug&&(this.debugState=!0,this.camera.speed=.5,this.debugUtils(),t.toggleVolume(),v.Engine.audioEngine.setGlobalVolume(0));var T=new Date,_=!1,x=0;this.engine.runRenderLoop((function(){var e=(new Date-T)/1e3,r=n.engine.getDeltaTime()/1e3;n.camera.position.y>R&&(n.camera.position.y=R);var l=n.camera.position.y<=0;if(_!==l&&(_=l,n.audioDiver&&(n.audioDiver.pause(),_&&n.audioDiver.play()),n.audioOcean&&(n.audioOcean.pause(),_||n.audioOcean.play())),x++%8&&(o.textContent=_?(-n.camera.position.y).toFixed(1):0,c.textContent=parseInt(e/60,10)+":"+parseInt(e%60,10).toString().padStart(2,"0"),d.textContent=n.ascentSpeedGraph(n.lastDepth,(n.camera.position.y-n.lastDepth)/r),h.textContent=Math.round((180*n.camera.rotation.y/Math.PI%360+360)%360)),n.lastDepth=n.camera.position.y,t.$route.query.debug){var f=document.getElementById("inspector-host");f&&(f.style.position="absolute")}k.time=e,m.update(r),y.update(r),n.scene.render(),t.snapshotRequested&&(t.snapshotRequested=!1,n.share())})),window.addEventListener("resize",(function(){return n.resize()}))}var t;return Object(d.a)(e,[{key:"ascentSpeedColor",value:function(e){return e<1/60?"#000":e<.1||e<.2?"#0f0":e<.3?"#ff0":"#f00"}},{key:"ascentSpeedGraph",value:function(e,t){return e>=0||t<0?"":t<1/60||t<.1?"<":t<.2?"<<":t<.3?"<<<":"<<<<"}},{key:"share",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("underwater-3d").toDataURL(),n=function(){var a=document.createElement("a"),e=(new Date).toJSON().slice(0,19).replaceAll(":","-");a.setAttribute("download","LajeDeSantos-"+e+".png"),a.setAttribute("href",t.replace("image/png","application/octet-stream")),a.click()},!navigator.canShare){e.next=20;break}return e.next=5,fetch(t);case 5:return e.next=7,e.sent.blob();case 7:return r=e.sent,o=new File([r],"lajedesantos.png",{type:r.type}),c={title:"Laje de Santos",url:"https://lajedesantos.net",files:[o]},e.prev=10,e.next=13,navigator.share(c);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),n();case 18:e.next=21;break;case 20:n();case 21:case"end":return e.stop()}}),e,null,[[10,15]])}))),function(){return t.apply(this,arguments)})},{key:"beforeDestroy",value:function(){document.onfullscreenchange=null,this.audioDiver&&(this.audioDiver.pause(),this.audioDiver=null),this.audioOcean&&(this.audioOcean.pause(),this.audioOcean=null),this.engine.stopRenderLoop(),this.scene.dispose(),this.scene=null,this.engine=null}},{key:"createPathForAnimation",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,r=new v.Path3D(t.getPoints(),S(0,-1,0),!1,!0),o=r.getTangents(),c=r.getNormals(),l=r.getBinormals(),d=r.getCurve(),h=new v.Animation("cameraPos","position",n,v.Animation.ANIMATIONTYPE_VECTOR3),f=[],m=new v.Animation("cameraRot","rotationQuaternion",n,v.Animation.ANIMATIONTYPE_QUATERNION),w=[],i=0;i<d.length;i++){var y=d[i],T=o[i],_=(l[i],v.Quaternion.FromLookDirectionRH(T,c[i]));f.push({frame:i*n,value:y}),w.push({frame:i*n,value:_})}h.setKeys(f),m.setKeys(w),e.animations.push(h),e.animations.push(m);var x=this.scene.beginAnimation(e,0,n*d.length,!0);return x}},{key:"bootScene",value:function(e,t){var n=this;function r(){this.loadingUIText="Mergulho na Laje de Santos"}t.isTouch="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,r.prototype.displayLoadingUI=function(){alert(this.loadingUIText)},r.prototype.hideLoadingUI=function(){alert("Loaded!")},this.engine=new v.Engine(e,!0),this.engine.loadingUIText="Mergulho na Laje de Santos",this.scene=new v.Scene(this.engine),this.scene.clearColor=new v.Color4(0,.5,.85,0);var o=new v.Vector3(-15.51978616737642,R,29.13296827068854);this.camera=new v.UniversalCamera("Camera",o,this.scene),this.guidedTour(),this.animTour.pause(),t.isTouch&&this.joystick(),this.camera.applyGravity=!1,this.camera.speed=.05,this.camera.ellipsoid=new v.Vector3(.5,1,.5),this.camera.keysUp.push("w".charCodeAt(0)),this.camera.keysUp.push("W".charCodeAt(0)),this.scene.onKeyboardObservable.add((function(e){switch(v.Engine.audioEngine.audioContext&&v.Engine.audioEngine.audioContext.resume(),e.type){case v.KeyboardEventTypes.KEYDOWN:if(console.log("KEY DOWN: ",e.event.key)," "===e.event.key&&n.togglePauseTour(),"p"===e.event.key)console.log(JSON.stringify({rotationQuaternion:n.camera.rotationQuaternion,position:n.camera.position,cameraDirection:n.camera.cameraDirection,cameraRotation:n.camera.cameraRotation}));else if("n"===e.event.key){var t=new v.Animation("slideIn","position",30,v.Animation.ANIMATIONTYPE_VECTOR3,v.Animation.ANIMATIONLOOPMODE_CYCLE,!0),r=[{frame:0,value:new v.Vector3(-15.51978616737642,R,29.13296827068854)},{frame:240,value:new v.Vector3(-20,-15,22)},{frame:480,value:new v.Vector3(-14.12,-17.2,27.19)}];t.setKeys(r),(new v.CubicEase).setEasingMode(v.EasingFunction.EASINGMODE_EASEINOUT),n.camera.animations=[t],n.scene.beginAnimation(n.camera,0,r[r.length-1].frame,!0)}break;case v.KeyboardEventTypes.KEYUP:console.log("KEY UP: ",e.event.keyCode)}})),this.camera.minZ=.1,this.camera.maxZ=700,this.camera.setTarget(new v.Vector3(-12.89001753167552,1.708562384403646,25.710433418293825)),this.camera.attachControl(e,!0),this.scene.collisionsEnabled=!0,this.camera.checkCollisions=!0,this.scene.autoClear=!1,this.scene.autoClearDepthAndStencil=!1,this.assetsManager=new v.AssetsManager(this.scene),this.assetsManager.onTaskErrorObservable.add((function(e){console.error("task failed",e.name,e.errorObject.message,e.errorObject.exception)})),this.assetsManager.onTaskSuccessObservable.add((function(e){console.log("task successful",e.name)})),this.assetsManager.onProgress=function(e,t,r){n.engine.loadingUIText="We are loading the scene. "+e+" out of "+t+" items still need to be loaded."}}},{key:"sceneOptimizer",value:function(){var e=v.SceneOptimizerOptions.HighDegradationAllowed();e.optimizations=e.optimizations.filter((function(e){return!e.getDescription().includes("Merging similar meshes")}));v.SceneOptimizer.OptimizeAsync(this.scene,e)}},{key:"debugUtils",value:function(){this.scene.debugLayer.show()}},{key:"instrumentation",value:function(){var e=new v.EngineInstrumentation(this.engine);e.captureGPUFrameTime=!0,e.captureShaderCompilationTime=!0;var i=0;this.scene.registerBeforeRender((function(){i%30==0&&console.log("current frame time (GPU): "+(1e-6*e.gpuFrameTimeCounter.current).toFixed(2)+"ms\naverage frame time (GPU): "+(1e-6*e.gpuFrameTimeCounter.average).toFixed(2)+"ms\ntotal shader compilation time: "+e.shaderCompilationTimeCounter.total.toFixed(2)+"ms\naverage shader compilation time: "+e.shaderCompilationTimeCounter.average.toFixed(2)+"ms\ncompiler shaders count: "+e.shaderCompilationTimeCounter.count),i++}))}},{key:"joystick",value:function(){var e=this,t=new v.ArcRotateCamera("BGCamera",Math.PI/2+Math.PI/7,Math.PI/2,100,new v.Vector3(0,20,0),this.scene);this.scene.activeCameras=[this.camera,t],t.layerMask=268435456;var n=w.AdvancedDynamicTexture.CreateFullscreenUI("UI",!0,this.scene);n.layer.layerMask=268435456;var r=0,o=0,c=0,l=0,d=-50,h=x("leftThumb",2,"blue",null);h.height="200px",h.width="200px",h.isPointerBlocker=!0,h.horizontalAlignment=v.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,h.verticalAlignment=v.GUI.Control.VERTICAL_ALIGNMENT_BOTTOM,h.alpha=.4,h.left=5,h.top=d;var f=x("leftInnerThumb",4,"blue",null);f.height="80px",f.width="80px",f.isPointerBlocker=!1,f.horizontalAlignment=v.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,f.verticalAlignment=v.GUI.Control.VERTICAL_ALIGNMENT_CENTER;var m=x("leftPuck",0,"blue","blue");m.height="60px",m.width="60px",m.isPointerBlocker=!0,m.horizontalAlignment=v.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,m.verticalAlignment=v.GUI.Control.VERTICAL_ALIGNMENT_CENTER,h.onPointerDownObservable.add((function(e){m.isVisible=!0,m.floatLeft=e.x-.5*h._currentMeasure.width-5,m.left=m.floatLeft,m.floatTop=n._canvas.height-e.y-.5*h._currentMeasure.height+d,m.top=-1*m.floatTop,m.isDown=!0,h.alpha=.9})),h.onPointerUpObservable.add((function(e){r=0,o=0,m.isDown=!1,m.isVisible=!1,h.alpha=.4})),h.onPointerMoveObservable.add((function(e){m.isDown&&(r=e.x-.5*h._currentMeasure.width-5,o=n._canvas.height-e.y-.5*h._currentMeasure.height+d,m.floatLeft=r,m.floatTop=-1*o,m.left=m.floatLeft,m.top=m.floatTop)})),n.addControl(h),h.addControl(f),h.addControl(m),m.isVisible=!1;var y=x("rightThumb",2,"red",null);y.height="200px",y.width="200px",y.isPointerBlocker=!0,y.horizontalAlignment=v.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,y.verticalAlignment=v.GUI.Control.VERTICAL_ALIGNMENT_BOTTOM,y.alpha=.4,y.left=-5,y.top=d;var T=x("rightInnerThumb",4,"red",null);T.height="80px",T.width="80px",T.isPointerBlocker=!1,T.horizontalAlignment=v.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,T.verticalAlignment=v.GUI.Control.VERTICAL_ALIGNMENT_CENTER;var _=x("rightPuck",0,"red","red");function x(e,t,n,r,o){var rect=new v.GUI.Ellipse;return rect.name=e,rect.thickness=t,rect.color=n,rect.background=r,rect.paddingLeft="0px",rect.paddingRight="0px",rect.paddingTop="0px",rect.paddingBottom="0px",rect}_.height="60px",_.width="60px",_.isPointerBlocker=!0,_.horizontalAlignment=v.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,_.verticalAlignment=v.GUI.Control.VERTICAL_ALIGNMENT_CENTER,y.onPointerDownObservable.add((function(e){_.isVisible=!0,_.floatLeft=n._canvas.width-e.x-.5*y._currentMeasure.width-5,_.left=-1*_.floatLeft,_.floatTop=n._canvas.height-e.y-.5*y._currentMeasure.height+d,_.top=-1*_.floatTop,_.isDown=!0,y.alpha=.9})),y.onPointerUpObservable.add((function(e){c=0,l=0,_.isDown=!1,_.isVisible=!1,y.alpha=.4})),y.onPointerMoveObservable.add((function(e){_.isDown&&(c=n._canvas.width-e.x-.5*y._currentMeasure.width-5,l=n._canvas.height-e.y-.5*y._currentMeasure.height+d,_.floatLeft=-1*c,_.floatTop=-1*l,_.left=_.floatLeft,_.top=_.floatTop)})),n.addControl(y),y.addControl(T),y.addControl(_),_.isVisible=!1,this.scene.registerBeforeRender((function(){o>=0&&e.camera.position.addInPlace(e.camera.getDirection(v.Vector3.Forward()).scale(o/1e3)),e.camera.cameraRotation.y+=c/5e4*-1,e.camera.cameraRotation.x+=l/5e4*-1}))}},{key:"resize",value:function(){this.engine&&this.engine.resize(),this.rebuildOceanTexture=!0}},{key:"lights",value:function(){var e=new v.HemisphericLight("light1",new v.Vector3(0,1,0),this.scene);e.diffuse=v.Color3.FromHexString("#CCCCCC"),e.intensity=.4,this.sunLight=new v.DirectionalLight("DirectionalLight",new v.Vector3(-.5,-1,.6).normalize(),this.scene),this.sunLight.diffuse=v.Color3.FromHexString("#FFFFFF"),this.sunLight.intensity=.8}},{key:"materials",value:function(){v.RegisterMaterialPlugin("Caustic",(function(e){return e.caustic=new k(e),e.caustic.isEnabled=!0,e.caustic}))}},{key:"composer",value:function(){var e=new v.PostProcessRenderPipeline(this.engine,"pipeline"),t=new v.Texture(this.base+"textures/half_kloofendal_48d_partly_cloudy_4k.jpg",this.scene,!1,!0,v.Texture.NEAREST_NEAREST),n=this.loadOceanPP();this.oceanPostProcess=n,this.oceanPostProcess.skyTexture=t;var r=new v.FxaaPostProcess("fxaa",1,null,null,this.engine),o=[this.oceanPostProcess,r],c=new v.PostProcessRenderEffect(this.engine,"renderLayer",(function(){return o}));e.addEffect(c),this.scene.postProcessRenderPipelineManager.addPipeline(e),this.scene.postProcessRenderPipelineManager.attachCamerasToRenderPipeline("pipeline",this.camera)}},{key:"loadOceanPP",value:function(){var e=function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.log(2)))},t={width:e(this.camera.getEngine().getRenderWidth()),height:e(this.camera.getEngine().getRenderHeight()),light:this.sunLight};t.width>2048&&(t.width=2048),t.height>2048&&(t.height=2048),t.isPipeline=!0;var n=new y.a("myOcean",this.camera,t);return n.reflectionEnabled=!1,n.refractionEnabled=!1,n.worldScale=.2,n}},{key:"addToSceneAndCaustic",value:function(e){e.forEach((function(e){e.material&&e.material.pluginManager.getPlugin("Caustic")&&(e.material.pluginManager.getPlugin("Caustic").isEnabled=!0)}))}},{key:"loadTerrain",value:function(){var e=this;return new Promise((function(t,n){var r=[],o=[],c=[],l=[],d=null,h=!1,f=function(){d&&h&&r.length&&(r[1].thinInstanceSetBuffer("matrix",d,16),e.addToSceneAndCaustic([r[1]]),t())};e.assetsManager.addMeshTask("rocks",null,e.base+"models/ilha/","rocks.glb").onSuccess=function(e){e.loadedMeshes.forEach((function(e){"rockLow1"!==e.name&&"rockLow1.001"!==e.name&&"rockLow1.002"!==e.name||(e.freezeWorldMatrix(),e.material,r.push(e))})),f()},e.assetsManager.addTextFileTask("rocksMatrices",e.base+"models/ilha/rocks.base64").onSuccess=function(e){d=new Float32Array(v.DecodeBase64ToBinary(e.text)),f()},e.assetsManager.addMeshTask("terrain",null,e.base+"models/ilha/","ilha03.glb").onSuccess=function(t){var n,r=[],d=_(t.loadedMeshes);try{for(d.s();!(n=d.n()).done;){var m=n.value;m.name.includes("rock")?(m.computeWorldMatrix(),o.push(m.getAbsolutePivotPoint()),c.push(m.rotationQuaternion),l.push(m.absoluteScaling),m.dispose()):m.freezeWorldNormals?(m.doNotSyncBoundingInfo=!0,m.material&&m.material.freeze(),m.alwaysSelectAsActiveMesh=!0,m.cullingStrategy=v.AbstractMesh.CULLINGSTRATEGY_OPTIMISTIC_INCLUSION,m.convertToUnIndexedMesh(),m.freezeNormals(),m.freezeWorldMatrix(),r.push(m),e.sunLight.includedOnlyMeshes.push(m)):m.material&&r.push(m)}}catch(e){d.e(e)}finally{d.f()}e.addToSceneAndCaustic(r);v.Mesh.MergeMeshes(r,!0,!0,void 0,!1,!0);h=!0,f()}}))}},{key:"loadMoreiaBarco",value:function(){var e=this;return new Promise((function(t,n){e.assetsManager.addMeshTask("barcoMoreia",null,e.base+"models/","moreia-20210912.glb").onSuccess=function(n){n.loadedMeshes[0].name+="barcoMoreia";var r,o=[],c=_(n.loadedMeshes);try{for(c.s();!(r=c.n()).done;){var l=r.value;l.position=new v.Vector3(-14.12,-17.2,27.19),l.material&&(l.material.backFaceCulling=!1,l.material.freeze(),o.push(l)),l.alwaysSelectAsActiveMesh=!0,l.cullingStrategy=v.AbstractMesh.CULLINGSTRATEGY_OPTIMISTIC_INCLUSION,l.freezeNormals(),l.freezeWorldMatrix()}}catch(e){c.e(e)}finally{c.f()}e.addToSceneAndCaustic(o),t()}}))}},{key:"_fixLoadedModelsOrientation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e[0],r=e[1];n.scaling.z=1,n.scaling.y=1,n.scaling.x=1,n.rotationQuaternion.y=0,t&&(r.parent.rotationQuaternion.x=1,r.parent.rotationQuaternion.y=0,r.parent.rotationQuaternion.z=0,r.parent.rotationQuaternion.w=0)}},{key:"loadTurtle",value:function(){var e=this;return new Promise((function(t,n){var r=[S(-22,-10,27),S(-20,-12,31),S(-18,-11,33),S(-14,-10,35),S(-12,-11,33),S(-10,-12,31),S(-6,-10,27)],o=e.buildTourCurveDecent(r,30);e.assetsManager.addMeshTask("tartaruga",null,e.base+"models/tartaruga/","tartaruga.glb").onSuccess=function(n){n.loadedMeshes[0].name+="tartaruga",n.loadedMeshes[0].scaling.y=-1,n.loadedMeshes[0].scaling.z=-1;var r,c=[],l=_(n.loadedMeshes);try{for(l.s();!(r=l.n()).done;){var d=r.value;d.material?(d.material.backFaceCulling=!1,d.material.freeze(),c.push(d)):e.createPathForAnimation(d,o,30)}}catch(e){l.e(e)}finally{l.f()}e.addToSceneAndCaustic(c),t()}}))}},{key:"loadMantas",value:function(){var e=this;return new Promise((function(t,n){var r=[S(-4,-19,23),S(8,-17,30),S(22,-14,39),S(32,-13,43),S(28,-15,50),S(16,-18,44),S(2,-19,32),S(-9,-21,28)],o=e.buildTourCurveDecent(r,40);e.assetsManager.addMeshTask("manta",null,e.base+"models/","raiaManta.glb").onSuccess=function(n){var r=[];n.loadedMeshes[0].name+="raiaManta",n.loadedMeshes[0].scaling.y=-1,n.loadedMeshes[0].scaling.z=-1;var c,l=_(n.loadedMeshes);try{for(l.s();!(c=l.n()).done;){var d=c.value;d.material?(d.material.backFaceCulling=!1,d.material.freeze(),r.push(d)):e.createPathForAnimation(d,o,10)}}catch(e){l.e(e)}finally{l.f()}e.addToSceneAndCaustic(r),t()}}))}},{key:"loadAudio",value:function(){var e=this;return new Promise((function(t,n){var r=function(){e.audioDiver&&e.audioOcean&&t()};e.assetsManager.addBinaryFileTask("sound_diver",e.base+"audio/156011__hdvideoguy__scubadiving-01.mp3").onSuccess=function(t){e.audioDiver=new v.Sound("sound_diver",t.data,e.scene,(function(){}),{autoplay:!1,loop:!0}),r()},e.assetsManager.addBinaryFileTask("sound_ocean",e.base+"audio/435668__byjoshberry__ocean-waves-hitting-bow-of-moving-boat.mp3").onSuccess=function(t){e.audioOcean=new v.Sound("sound_ocean",t.data,e.scene,(function(){e.audioOcean.play()}),{autoplay:!1,loop:!0}),r()}}))}},{key:"loadDiverBoat",value:function(){var e=this;return new Promise((function(t,n){e.assetsManager.addMeshTask("diver_with_boat",null,e.base+"models/licensed/","diver_with_boat.glb").onSuccess=function(e){e.loadedMeshes[0].name+="diver_with_boat";var n,r=_(e.loadedMeshes);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.position=new v.Vector3(-14.12,.5,27.19),o.material&&o.material.freeze(),o.alwaysSelectAsActiveMesh=!0}}catch(e){r.e(e)}finally{r.f()}t()}}))}},{key:"loadDiverBoatBig",value:function(){var e=this;return new Promise((function(t,n){e.assetsManager.addMeshTask("diver_boatBig",null,e.base+"models/licensed/","dive_boat.glb").onSuccess=function(e){e.loadedMeshes[0].name+="diver_boatBig";var n,r=[],o=_(e.loadedMeshes);try{for(o.s();!(n=o.n()).done;){var c=n.value;c.position=new v.Vector3(-12.12,.5,27.19),c.material&&(r.push(c),c.material.freeze())}}catch(e){o.e(e)}finally{o.f()}v.Mesh.MergeMeshes(r,!0,!0,void 0,!1,!0);t()}}))}},{key:"buildTourCurveDecent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=v.Curve3.CreateCatmullRomSpline(e,t,!0);return n}},{key:"guidedTour",value:function(){var e=this.buildTourCurveDecent([new v.Vector3(-15.51978616737642,R,29.13296827068854),new v.Vector3(-15,-5,26),new v.Vector3(-14.5,-10,24),new v.Vector3(-14.3,-13,22),new v.Vector3(-14.12,-14.2,27.19),new v.Vector3(-16.12,-11.2,28.19),new v.Vector3(-18.12,-9.2,30.19)]);this.camera.updateUpVectorFromRotation=!0,this.animTour=this.createPathForAnimation(this.camera,e,60)}},{key:"togglePauseTour",value:function(){this.animTour._paused?this.animTour.restart():this.animTour.pause(),this.vueComponent.playing=!this.animTour._paused}},{key:"quitTour",value:function(){this.animTour.stop(),this.animTour.goToFrame(0)}},{key:"loadBoidsModel",value:function(e,t,n,r,o,c,l){var d=this,h=[],f={},m=5e-4,w=.03,y=.2,x=.5,M=.2,C=Math.min(Math.abs(o.x-r.x),Math.abs(o.y-r.y),Math.abs(o.z-r.z))/2.8,E=new T.a,A=null,I=-1;function S(e){e&&e.data.frame!==I&&(I=e.data.frame,"started"===e.data.command||(h=e.data.boids))}E.onmessage=function(e){A=e},E.postMessage({command:"bundle",list:[{command:"construct",total:n,center:r.add(o.subtract(r).scale(.5)),initialRadius:C,boundRadiusScale:30},{command:"set",name:"boundsMin",value:r},{command:"set",name:"boundsMax",value:o},{command:"calculateBounds"},{command:"set",name:"cohesion",value:m},{command:"set",name:"alignment",value:w},{command:"set",name:"separation",value:y},{command:"set",name:"separationMinDistance",value:x},{command:"set",name:"maxSpeed",value:M},{command:"reset",total:n,initialRadius:C},{command:"start"}]});for(var R=null,k=new Float32Array(16*n),O=v.Matrix.Identity(),i=0;i<n;i++)O.copyToArray(k,16*i);new Float32Array(4*n);var p=v.SceneLoader.ImportMeshAsync("",e,t,this.scene,void 0).then((function(e){var n,r=e.meshes,o=_(r);try{for(o.s();!(n=o.n()).done;){var c=n.value;c.material&&c.material.freeze(),d.scene.stopAnimation(c)}}catch(e){o.e(e)}finally{o.f()}var l=r[0],h=v.Matrix.Identity();l.rotationQuaternion.toRotationMatrix(h),l.bakeTransformIntoVertices(h),d._fixLoadedModelsOrientation(r,!1),l.name+=t,(R=r[1]).computeWorldMatrix(),R.thinInstanceSetBuffer("matrix",k,16),d.addToSceneAndCaustic(r)})).catch((function(e){console.error(e)}));return{models:[R],boidsWorkerThread:E,promise:p,update:function(e,t,n){var r=new v.Vector3(1,1,1),o=new v.Vector3(1,1,1),l=new v.Vector3(0,-1,0),d=v.Matrix.Identity(),m=v.Quaternion.Zero(),w=new v.Vector3(1,1,1),y=new v.Vector3(1,1,1),T=new v.Vector3(1,1,1),_=new v.Vector3(1,1,1);return function(e){performance.now();if(R){S(A);for(var t=0;t<h.length;t++){var n=h[t];T.copyFrom(n.position),_.copyFrom(n.velocity),_.normalizeToRef(o),v.Vector3.CrossToRef(o,l,y),v.Vector3.CrossToRef(y,o,w),v.Quaternion.RotationQuaternionFromAxisToRef(y,o,w,m),m.multiplyInPlace(c),v.Matrix.ComposeToRef(r,m,T,d),d.copyToArray(k,16*t),f.boids&&d.copyToArray(f.influenceMatrices,16*t)}R.thinInstanceSetBuffer("matrix",k,16),f.influenceMesh&&f.influenceMesh.thinInstanceSetBuffer("matrix",f.influenceMatrices,16)}}}()}}},{key:"random",value:function(e,t){return Math.random()*(t-e)+e}},{key:"clamp",value:function(e,t,n){return Math.min(Math.max(e,t),n)}}]),e}(),P={props:{},data:function(){return{isFullscreen:!1,isTouch:!1,started:!1,snapshotRequested:!1,ascentSpeed:0,depth:0,time:0,air:100,fps:0,volume:0,mute:!1,orientationDegrees:0,playing:!1}},computed:{base:function(){return this.$router.options.base},ascentSpeedColor:function(){return this.ascentSpeed<1/60?"#000":this.ascentSpeed<.1||this.ascentSpeed<.2?"#0f0":this.ascentSpeed<.3?"#ff0":"#f00"},ascentSpeedGraph:function(){return 0===this.depth?"":this.ascentSpeed<1/60||this.ascentSpeed<.1?"<":this.ascentSpeed<.2?"<<":this.ascentSpeed<.3?"<<<":"<<<<"}},mounted:function(){this.underwater=new O(this)},beforeDestroy:function(){console.log("before destroy",this.underwater),this.underwater&&this.underwater.beforeDestroy(),this.underwater=null},methods:{fullscreen:function(){document.getElementById("underwater").requestFullscreen()},start:function(){this.started=!0,this.fullscreen()},toggleVolume:function(){this.mute=!this.mute,this.mute?(this.volume=v.Engine.audioEngine.getGlobalVolume(),v.Engine.audioEngine.setGlobalVolume(0)):v.Engine.audioEngine.setGlobalVolume(this.volume)},toggleGuidedTour:function(){this.underwater.togglePauseTour()},stopGuidedTour:function(){this.underwater.quitTour()}}},N=(n(340),n(4)),F={components:{Underwater:Object(N.a)(P,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"underwater"}},[n("canvas",{attrs:{id:"underwater-3d","touch-action":"none"}}),e._v(" "),n("div",{attrs:{id:"underwater-settings"}},[n("font-awesome-icon",{attrs:{icon:["fas","camera"],size:"2x"},on:{click:function(t){e.snapshotRequested=!0}}}),e._v(" "),n("font-awesome-layers",{staticClass:"fa-2x",on:{click:e.toggleVolume}},[n("font-awesome-icon",{attrs:{icon:["fas","volume-up"],transform:"shrink-6"}}),e._v(" "),n("font-awesome-icon",{directives:[{name:"show",rawName:"v-show",value:e.mute,expression:"mute"}],staticStyle:{color:"Tomato"},attrs:{icon:"ban"}})],1),e._v(" "),n("font-awesome-layers",{staticClass:"fa-2x",on:{click:e.toggleGuidedTour}},[n("font-awesome-icon",{directives:[{name:"show",rawName:"v-show",value:!e.playing,expression:"!playing"}],attrs:{icon:["fas","play"],transform:"shrink-6"}}),e._v(" "),n("font-awesome-icon",{directives:[{name:"show",rawName:"v-show",value:e.playing,expression:"playing"}],attrs:{icon:["fas","pause"],transform:"shrink-6"}})],1)],1),e._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:!e.isFullscreen&&e.started,expression:"!isFullscreen && started"}],staticClass:"button-giant",attrs:{id:"underwater-fullscreen"},on:{click:e.fullscreen}},[n("i18n",[e._v("Ficar em tela cheia")])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.started,expression:"!started"}],attrs:{id:"underwater-instructions"}},[e.isTouch?n("p",[n("i18n",[e._v("\n        Use os joysticks azul e vermelho para girar e nadar.\n      ")])],1):n("p",[n("i18n",[e._v("\n        Torne-se um mergulhador e explore a Laje de Santos.\n      ")]),e._v(" "),n("br"),e._v(" "),n("i18n",[e._v("\n        Clique Com o Botão Esquerdo do Mouse e Arraste para Olhar ao Redor.\n      ")]),e._v(" "),n("br"),e._v(" "),n("i18n",[e._v("\n        Aperte 'W' para nadar.\n      ")])],1),e._v(" "),n("button",{staticClass:"button-giant",attrs:{id:"underwater-start"},on:{click:e.start}},[n("i18n",[e._v("Iniciar")])],1)]),e._v(" "),n("div",{attrs:{id:"underwater-hud"}},[n("div",{attrs:{id:"underwater-hud-depth"}},[n("span",{attrs:{id:"underwater-hud-depth-name"}},[n("i18n",[e._v("Profundidade")])],1),n("br"),e._v(" "),n("span",{staticStyle:{color:"#fff"},attrs:{id:"underwater-hud-depth-ascent"}}),e._v(" "),n("span",{attrs:{id:"underwater-hud-depth-value"}},[e._v("0.0")]),e._v(" "),n("span",{attrs:{id:"underwater-hud-depth-unit"}},[e._v("m")])]),e._v(" "),n("div",{attrs:{id:"underwater-hud-time"}},[n("span",{attrs:{id:"underwater-hud-time-name"}},[n("i18n",[e._v("Tempo")])],1),n("br"),e._v(" "),n("span",{attrs:{id:"underwater-hud-time-value"}})]),e._v(" "),n("div",{attrs:{id:"underwater-hud-compass"}},[n("span",{attrs:{id:"underwater-hud-compass-name"}},[n("i18n",[e._v("Compasso")])],1),n("br"),e._v(" "),n("span",{attrs:{id:"underwater-hud-compass-value"}})])])])}),[],!1,null,"bc7bfc30",null).exports},extends:c.default,data:function(){return{gpuTierLoaded:!1,gpuTier:{tier:-1,isMobile:!1,type:"",fps:0,gpu:""}}},mounted:function(){this.head.title=this.$gettext("Mergulho virtual"),this.head.description=this.$gettext("Mergulho em realidade virtual na Laje de Santos"),this.getGpuTier()},methods:{getGpuTier:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.a)();case 2:n=t.sent,e.$set(e,"gpuTier",n),e.gpuTierLoaded=!0;case 5:case"end":return t.stop()}}),t)})))()}}},L=Object(N.a)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",[n("section",[n("h1",[n("i18n",[e._v("Mergulho virtual")])],1),e._v(" "),n("p",[n("i18n",[e._v("\n        Experimente um mergulho virtual na Laje de Santos e veja o naufrágio Moreia e a vida.\n        É preciso que seu aparelho tenha suporte a 3D para executar este ambiente com bom\n        desempenho. Expectativa de desempenho:\n      ")]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.gpuTierLoaded,expression:"!gpuTierLoaded"}]},[n("i18n",[e._v("Testando desempenho...")])],1),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.gpuTierLoaded,expression:"gpuTierLoaded"}],staticStyle:{"font-weight":"bold"}},[0===e.gpuTier.tier?n("span",[n("i18n",[e._v("Muito baixo desempenho, muito devagar ou não funcionará")])],1):1===e.gpuTier.tier?n("span",[n("i18n",[e._v("Baixo desempenho, devagar")])],1):2===e.gpuTier.tier?n("span",[n("i18n",[e._v("Médio desempenho")])],1):3===e.gpuTier.tier?n("span",[n("i18n",[e._v("Ótimo desempenho")])],1):e._e()])],1),e._v(" "),n("Underwater")],1)])}),[],!1,null,null,null);t.default=L.exports}}]);