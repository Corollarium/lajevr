(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{204:function(e,t,r){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=r(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,r,n){void 0===n&&(n=!1);var i=e.getVersionPrecision(t),s=e.getVersionPrecision(r),a=Math.max(i,s),o=0,u=e.map([t,r],(function(t){var r=a-e.getVersionPrecision(t),n=t+new Array(r+1).join(".0");return e.map(n.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(n&&(o=a-Math.min(i,s)),a-=1;a>=o;){if(u[0][a]>u[1][a])return 1;if(u[0][a]===u[1][a]){if(a===o)return 0;a-=1}else if(u[0][a]<u[1][a])return-1}},e.map=function(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n},e.find=function(e,t){var r,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,n=e.length;r<n;r+=1){var i=e[r];if(t(i,r))return i}},e.assign=function(e){for(var t,r,n=e,i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(s));var o=function(){var e=s[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){n[t]=e[t]}))};for(t=0,r=s.length;t<r;t+=1)o();return e},e.getBrowserAlias=function(e){return n.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return n.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(91))&&n.__esModule?n:{default:n},s=r(18);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){}var t,r,n;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,n=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],(r=null)&&a(t.prototype,r),n&&a(t,n),e}();t.default=o,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=u(r(92)),i=u(r(93)),s=u(r(94)),a=u(r(95)),o=u(r(17));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=o.default.find(n.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=o.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=o.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=o.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return o.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},n=0,i={},s=0;if(Object.keys(e).forEach((function(t){var a=e[t];"string"==typeof a?(i[t]=a,s+=1):"object"==typeof a&&(r[t]=a,n+=1)})),n>0){var a=Object.keys(r),u=o.default.find(a,(function(e){return t.isOS(e)}));if(u){var c=this.satisfies(r[u]);if(void 0!==c)return c}var l=o.default.find(a,(function(e){return t.isPlatform(e)}));if(l){var d=this.satisfies(r[l]);if(void 0!==d)return d}}if(s>0){var f=Object.keys(i),h=o.default.find(f,(function(e){return t.isBrowser(e,!0)}));if(void 0!==h)return this.compareVersion(i[h])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),n=e.toLowerCase(),i=o.default.getBrowserTypeByAlias(n);return t&&i&&(n=i.toLowerCase()),n===r},t.compareVersion=function(e){var t=[0],r=e,n=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(n=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(n=!0,r=e.substr(1)),t.indexOf(o.default.compareVersions(i,r,n))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e){return this.isBrowser(e)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=c,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},r=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18),a=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:s.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=i.default.getWindowsVersionName(t);return{name:s.OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:s.OS_MAP.iOS},r=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=i.default.getMacOSVersionName(t),n={name:s.OS_MAP.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=i.default.getAndroidVersionName(t),n={name:s.OS_MAP.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:s.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:s.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.PlayStation4,version:t}}}];t.default=a,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];t.default=a,e.exports=t.default},95:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18),a=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:s.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:s.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:s.ENGINE_MAP.Trident},r=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:s.ENGINE_MAP.Presto},r=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:s.ENGINE_MAP.Gecko},r=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:s.ENGINE_MAP.WebKit},r=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=a,e.exports=t.default}})},235:function(e,t,r){var n=r(3);n(n.S,"Object",{setPrototypeOf:r(143).set})},236:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(192);t.textAlign={center:new n.Vector2(0,0),left:new n.Vector2(1,0),top:new n.Vector2(0,-1),topLeft:new n.Vector2(1,-1),topRight:new n.Vector2(-1,-1),right:new n.Vector2(-1,0),bottom:new n.Vector2(0,1),bottomLeft:new n.Vector2(1,1),bottomRight:new n.Vector2(-1,1)};var o={};t.getFontHeight=function(e){var t=o[e];if(!t){var body=document.getElementsByTagName("body")[0],r=document.createElement("div"),n=document.createTextNode("MÃ‰q");r.appendChild(n),r.setAttribute("style","font:"+e+";position:absolute;top:0;left:0"),body.appendChild(r),t=r.offsetHeight,o[e]=t,body.removeChild(r)}return t}},268:function(e,t,r){"use strict";r(235);var n,o=this&&this.__extends||(n=function(e,b){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,b){e.__proto__=b}||function(e,b){for(var p in b)b.hasOwnProperty(p)&&(e[p]=b[p])},n(e,b)},function(e,b){function t(){this.constructor=e}n(e,b),e.prototype=null===b?Object.create(b):(t.prototype=b.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0});var c=r(192),l=r(236),d=r(358),f=function(e){function t(text,t){void 0===text&&(text=""),void 0===t&&(t={});var r=e.call(this)||this;return r._align=new c.Vector2,r._font=t.font||"30px Arial",r._fillStyle=t.fillStyle||"#FFFFFF",r._shadowColor=t.shadowColor||"rgba(0, 0, 0, 0)",r._shadowBlur=t.shadowBlur||0,r._shadowOffsetX=t.shadowOffsetX||0,r._shadowOffsetY=t.shadowOffsetY||0,r._lineHeight=t.lineHeight||1.2,r.canvas=new d.CanvasText,r.align=t.align||l.textAlign.center,r.side=t.side||c.DoubleSide,r.antialias=void 0===t.antialias||t.antialias,r.text=text,r}return o(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.textWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.textHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){this._text!==e&&(this._text=e,this.updateText())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this._font},set:function(e){this._font!==e&&(this._font=e,this.updateText())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillStyle",{get:function(){return this._fillStyle},set:function(e){this._fillStyle!==e&&(this._fillStyle=e,this.updateText())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){this._align.copy(e)},enumerable:!0,configurable:!0}),t.prototype.cleanUp=function(){this.texture&&this.texture.dispose()},t.prototype.applyAntiAlias=function(){!1===this.antialias&&(this.texture.magFilter=c.NearestFilter,this.texture.minFilter=c.LinearMipMapLinearFilter)},t}(c.Object3D);t.Text2D=f},356:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(357);t.SpriteText2D=n.SpriteText2D;var o=r(359);t.MeshText2D=o.MeshText2D;var c=r(236);t.textAlign=c.textAlign},357:function(e,t,r){"use strict";r(235),r(35);var n,o=this&&this.__extends||(n=function(e,b){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,b){e.__proto__=b}||function(e,b){for(var p in b)b.hasOwnProperty(p)&&(e[p]=b[p])},n(e,b)},function(e,b){function t(){this.constructor=e}n(e,b),e.prototype=null===b?Object.create(b):(t.prototype=b.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0});var c=r(192),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.raycast=function(){return this.sprite.raycast.apply(this.sprite,arguments)},t.prototype.updateText=function(){this.canvas.drawText(this._text,{font:this._font,fillStyle:this._fillStyle,shadowBlur:this._shadowBlur,shadowColor:this._shadowColor,shadowOffsetX:this._shadowOffsetX,shadowOffsetY:this._shadowOffsetY,lineHeight:this._lineHeight,align:this.align}),this.cleanUp(),this.texture=new c.Texture(this.canvas.canvas),this.texture.needsUpdate=!0,this.applyAntiAlias(),this.material?this.material.map=this.texture:this.material=new c.SpriteMaterial({map:this.texture}),this.sprite||(this.sprite=new c.Sprite(this.material),this.add(this.sprite)),this.sprite.scale.set(this.canvas.width,this.canvas.height,1),this.updateAlign()},t.prototype.updateAlign=function(){this.sprite&&(this.sprite.center.x=(.5-.5*this._align.x)*this.canvas.textWidth/this.canvas.width,this.sprite.center.y=1-(.5*this._align.y+.5)*this.canvas.textHeight/this.canvas.height)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){this._align.copy(e),this.updateAlign()},enumerable:!0,configurable:!0}),t}(r(268).Text2D);t.SpriteText2D=l},358:function(e,t,r){"use strict";r(94),r(16),r(69),r(70),r(35),Object.defineProperty(t,"__esModule",{value:!0});var n=r(192),o=r(236),c=function(){function e(){this.textWidth=null,this.textHeight=null,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}return Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},enumerable:!0,configurable:!0}),e.prototype.drawText=function(text,e){var t=this;this.ctx.font=e.font;var r=o.getFontHeight(e.font),c=(text||"").toString().split("\n");this.textWidth=Math.max.apply(null,c.map((function(line){return Math.ceil(t.ctx.measureText(line).width)}))),this.textHeight=r+r*e.lineHeight*(c.length-1),this.canvas.width=Math.max(2,n.Math.ceilPowerOfTwo(this.textWidth)),this.canvas.height=Math.max(2,n.Math.ceilPowerOfTwo(this.textHeight)),this.ctx.font=e.font,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle=e.fillStyle,1===e.align.x?this.ctx.textAlign="left":0===e.align.x?this.ctx.textAlign="center":this.ctx.textAlign="right",this.ctx.textBaseline="top",this.ctx.shadowColor=e.shadowColor,this.ctx.shadowBlur=e.shadowBlur,this.ctx.shadowOffsetX=e.shadowOffsetX,this.ctx.shadowOffsetY=e.shadowOffsetY;for(var l=this.textWidth*(.5-.5*e.align.x),i=0;i<c.length;i++)this.ctx.fillText(c[i],l,r*e.lineHeight*i);return this.canvas},e}();t.CanvasText=c},359:function(e,t,r){"use strict";r(235),r(35);var n,o=this&&this.__extends||(n=function(e,b){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,b){e.__proto__=b}||function(e,b){for(var p in b)b.hasOwnProperty(p)&&(e[p]=b[p])},n(e,b)},function(e,b){function t(){this.constructor=e}n(e,b),e.prototype=null===b?Object.create(b):(t.prototype=b.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0});var c=r(192),l=function(e){function t(text,t){return void 0===text&&(text=""),void 0===t&&(t={}),e.call(this,text,t)||this}return o(t,e),t.prototype.raycast=function(){this.mesh.raycast.apply(this.mesh,arguments)},t.prototype.updateText=function(){this.cleanUp(),this.canvas.drawText(this._text,{font:this._font,fillStyle:this._fillStyle,shadowBlur:this._shadowBlur,shadowColor:this._shadowColor,shadowOffsetX:this._shadowOffsetX,shadowOffsetY:this._shadowOffsetY,lineHeight:this._lineHeight,align:this.align}),this.texture=new c.Texture(this.canvas.canvas),this.texture.needsUpdate=!0,this.applyAntiAlias(),this.material?this.material.map=this.texture:(this.material=new c.MeshBasicMaterial({map:this.texture,side:this.side}),this.material.transparent=!0),this.mesh||(this.geometry=new c.PlaneGeometry(this.canvas.width,this.canvas.height),this.mesh=new c.Mesh(this.geometry,this.material),this.add(this.mesh)),this.mesh.position.x=this.canvas.width/2-this.canvas.textWidth/2+this.canvas.textWidth/2*this.align.x,this.mesh.position.y=-this.canvas.height/2+this.canvas.textHeight/2*this.align.y,this.geometry.vertices[0].x=this.geometry.vertices[2].x=-this.canvas.width/2,this.geometry.vertices[1].x=this.geometry.vertices[3].x=this.canvas.width/2,this.geometry.vertices[0].y=this.geometry.vertices[1].y=this.canvas.height/2,this.geometry.vertices[2].y=this.geometry.vertices[3].y=-this.canvas.height/2,this.geometry.verticesNeedUpdate=!0},t}(r(268).Text2D);t.MeshText2D=l},421:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));r(196);var n=r(89),o=r(90),c=r(200),l=r(197),d=r(194),f=(r(94),r(44),r(37),r(34),r(39),r(137),r(35),r(192));r(215),r(144);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var m=function(e){Object(c.a)(r,e);var t=h(r);function r(e){return Object(n.a)(this,r),t.call(this,e)}return Object(o.a)(r,[{key:"parse",value:function(e){var t=0,r=1,n=2,o=3,c=9,l=10,d=11,h=48,m=4,v=0,y=1,w=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");var _=0,content=new Uint8Array(e),header={id_length:content[_++],colormap_type:content[_++],image_type:content[_++],colormap_index:content[_++]|content[_++]<<8,colormap_length:content[_++]|content[_++]<<8,colormap_size:content[_++],origin:[content[_++]|content[_++]<<8,content[_++]|content[_++]<<8],width:content[_++]|content[_++]<<8,height:content[_++]|content[_++]<<8,pixel_size:content[_++],flags:content[_++]};!function(header){switch(header.image_type){case r:case c:(header.colormap_length>256||24!==header.colormap_size||1!==header.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case n:case o:case l:case d:header.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case t:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',header.image_type)}(header.width<=0||header.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),8!==header.pixel_size&&16!==header.pixel_size&&24!==header.pixel_size&&32!==header.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',header.pixel_size)}(header),header.id_length+_>e.length&&console.error("THREE.TGALoader: No data."),_+=header.id_length;var x=!1,A=!1,M=!1;switch(header.image_type){case c:x=!0,A=!0;break;case r:A=!0;break;case l:x=!0;break;case n:break;case d:x=!0,M=!0;break;case o:M=!0}var N=new Uint8Array(header.width*header.height*4),k=function(e,t,header,r,data){var n,o,c=header.pixel_size>>3,l=header.width*header.height*c;if(t&&(o=data.subarray(r,r+=header.colormap_length*(header.colormap_size>>3))),e){var d,f,i;n=new Uint8Array(l);for(var h=0,m=new Uint8Array(c);h<l;)if(f=1+(127&(d=data[r++])),128&d){for(i=0;i<c;++i)m[i]=data[r++];for(i=0;i<f;++i)n.set(m,h+i*c);h+=c*f}else{for(f*=c,i=0;i<f;++i)n[h+i]=data[r++];h+=f}}else n=data.subarray(r,r+=t?header.width*header.height:l);return{pixel_data:n,palettes:o}}(x,A,header,_,content);return function(data,e,t,image,r){var n,o,c,l,d,f;switch((header.flags&h)>>m){default:n=0,c=1,d=e,o=0,l=1,f=t;break;case v:n=0,c=1,d=e,o=t-1,l=-1,f=-1;break;case w:n=e-1,c=-1,d=-1,o=0,l=1,f=t;break;case y:n=e-1,c=-1,d=-1,o=t-1,l=-1,f=-1}if(M)switch(header.pixel_size){case 8:!function(e,t,r,n,o,c,l,image){var d,f,h,i=0,m=header.width;for(h=t;h!==n;h+=r)for(f=o;f!==l;f+=c,i++)d=image[i],e[4*(f+m*h)+0]=d,e[4*(f+m*h)+1]=d,e[4*(f+m*h)+2]=d,e[4*(f+m*h)+3]=255}(data,o,l,f,n,c,d,image);break;case 16:!function(e,t,r,n,o,c,l,image){var d,f,i=0,h=header.width;for(f=t;f!==n;f+=r)for(d=o;d!==l;d+=c,i+=2)e[4*(d+h*f)+0]=image[i+0],e[4*(d+h*f)+1]=image[i+0],e[4*(d+h*f)+2]=image[i+0],e[4*(d+h*f)+3]=image[i+1]}(data,o,l,f,n,c,d,image);break;default:console.error("THREE.TGALoader: Format not supported.")}else switch(header.pixel_size){case 8:!function(e,t,r,n,o,c,l,image,d){var f,h,m,v=d,i=0,y=header.width;for(m=t;m!==n;m+=r)for(h=o;h!==l;h+=c,i++)f=image[i],e[4*(h+y*m)+3]=255,e[4*(h+y*m)+2]=v[3*f+0],e[4*(h+y*m)+1]=v[3*f+1],e[4*(h+y*m)+0]=v[3*f+2]}(data,o,l,f,n,c,d,image,r);break;case 16:!function(e,t,r,n,o,c,l,image){var d,f,h,i=0,m=header.width;for(h=t;h!==n;h+=r)for(f=o;f!==l;f+=c,i+=2)d=image[i+0]+(image[i+1]<<8),e[4*(f+m*h)+0]=(31744&d)>>7,e[4*(f+m*h)+1]=(992&d)>>2,e[4*(f+m*h)+2]=(31&d)<<3,e[4*(f+m*h)+3]=32768&d?0:255}(data,o,l,f,n,c,d,image);break;case 24:!function(e,t,r,n,o,c,l,image){var d,f,i=0,h=header.width;for(f=t;f!==n;f+=r)for(d=o;d!==l;d+=c,i+=3)e[4*(d+h*f)+3]=255,e[4*(d+h*f)+2]=image[i+0],e[4*(d+h*f)+1]=image[i+1],e[4*(d+h*f)+0]=image[i+2]}(data,o,l,f,n,c,d,image);break;case 32:!function(e,t,r,n,o,c,l,image){var d,f,i=0,h=header.width;for(f=t;f!==n;f+=r)for(d=o;d!==l;d+=c,i+=4)e[4*(d+h*f)+2]=image[i+0],e[4*(d+h*f)+1]=image[i+1],e[4*(d+h*f)+0]=image[i+2],e[4*(d+h*f)+3]=image[i+3]}(data,o,l,f,n,c,d,image);break;default:console.error("THREE.TGALoader: Format not supported.")}}(N,header.width,header.height,k.pixel_data,k.palettes),{data:N,width:header.width,height:header.height,flipY:!0,generateMipmaps:!0,minFilter:f.LinearMipmapLinearFilter}}}]),r}(f.DataTextureLoader);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var y=function(e){Object(c.a)(r,e);var t=v(r);function r(e){return Object(n.a)(this,r),t.call(this,e)}return Object(o.a)(r,[{key:"load",value:function(e,t,r,n){var o=this,path=""===o.path?f.LoaderUtils.extractUrlBase(e):o.path,c=new f.FileLoader(o.manager);c.setPath(o.path),c.setRequestHeader(o.requestHeader),c.setWithCredentials(o.withCredentials),c.load(e,(function(text){try{t(o.parse(text,path))}catch(t){n?n(t):console.error(t),o.manager.itemError(e)}}),r,n)}},{key:"parse",value:function(text,path){function e(e,t){for(var r=[],n=e.childNodes,i=0,o=n.length;i<o;i++){var c=n[i];c.nodeName===t&&r.push(c)}return r}function t(text){if(0===text.length)return[];for(var e=text.trim().split(/\s+/),t=new Array(e.length),i=0,r=e.length;i<r;i++)t[i]=e[i];return t}function r(text){if(0===text.length)return[];for(var e=text.trim().split(/\s+/),t=new Array(e.length),i=0,r=e.length;i<r;i++)t[i]=parseFloat(e[i]);return t}function n(text){if(0===text.length)return[];for(var e=text.trim().split(/\s+/),t=new Array(e.length),i=0,r=e.length;i<r;i++)t[i]=parseInt(e[i]);return t}function o(text){return text.substring(1)}function c(object){return 0===Object.keys(object).length}function l(e){return void 0!==e&&!0===e.hasAttribute("meter")?parseFloat(e.getAttribute("meter")):1}function d(e){return void 0!==e?e.textContent:"Y_UP"}function h(t,r,n,o){var c=e(t,r)[0];if(void 0!==c)for(var l=e(c,n),i=0;i<l.length;i++)o(l[i])}function v(data,e){for(var t in data){data[t].build=e(data[t])}}function y(data,e){return void 0!==data.build||(data.build=e(data)),data.build}function w(e){for(var data={inputs:{}},i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType&&"input"===r.nodeName){var n=o(r.getAttribute("source")),c=r.getAttribute("semantic");data.inputs[c]=n}}return data}function _(e){var data={},t=e.getAttribute("target").split("/"),r=t.shift(),n=t.shift(),c=-1!==n.indexOf("("),l=-1!==n.indexOf(".");if(l)t=n.split("."),n=t.shift(),data.member=t.shift();else if(c){var d=n.split("(");n=d.shift();for(var i=0;i<d.length;i++)d[i]=parseInt(d[i].replace(/\)/,""));data.indices=d}return data.id=r,data.sid=n,data.arraySyntax=c,data.memberSyntax=l,data.sampler=o(e.getAttribute("source")),data}function x(data){var e=[],t=data.channels,r=data.samplers,n=data.sources;for(var o in t)if(t.hasOwnProperty(o)){var c=t[o],l=r[c.sampler],d=l.inputs.INPUT,f=l.inputs.OUTPUT;S(M(c,n[d],n[f]),e)}return e}function A(e){return y(at.animations[e],x)}function M(e,t,r){var time,n,i,o,c,l,d=at.nodes[e.id],f=ze(d.id),h=d.transforms[e.sid],m=d.matrix.clone().transpose(),data={};switch(h){case"matrix":for(i=0,o=t.array.length;i<o;i++)if(time=t.array[i],n=i*r.stride,void 0===data[time]&&(data[time]={}),!0===e.arraySyntax){var v=r.array[n],y=e.indices[0]+4*e.indices[1];data[time][y]=v}else for(c=0,l=r.stride;c<l;c++)data[time][c]=r.array[n+c];break;case"translate":case"rotate":case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',h)}var w=function(data,e){var t=[];for(var time in data)t.push({time:parseFloat(time),value:data[time]});t.sort(r);for(var i=0;i<16;i++)T(t,i,e.elements[i]);return t;function r(a,b){return a.time-b.time}}(data,m);return{name:f.uuid,keyframes:w}}var N=new f.Vector3,k=new f.Vector3,O=new f.Quaternion;function S(e,t){for(var r=e.keyframes,n=e.name,o=[],c=[],l=[],d=[],i=0,h=r.length;i<h;i++){var m=r[i],time=m.time,v=m.value;Fe.fromArray(v).transpose(),Fe.decompose(N,O,k),o.push(time),c.push(N.x,N.y,N.z),l.push(O.x,O.y,O.z,O.w),d.push(k.x,k.y,k.z)}return c.length>0&&t.push(new f.VectorKeyframeTrack(n+".position",o,c)),l.length>0&&t.push(new f.QuaternionKeyframeTrack(n+".quaternion",o,l)),d.length>0&&t.push(new f.VectorKeyframeTrack(n+".scale",o,d)),t}function T(e,t,r){var n,i,o,c=!0;for(i=0,o=e.length;i<o;i++)void 0===(n=e[i]).value[t]?n.value[t]=null:c=!1;if(!0===c)for(i=0,o=e.length;i<o;i++)(n=e[i]).value[t]=r;else!function(e,t){for(var r,n,i=0,o=e.length;i<o;i++){var c=e[i];if(null===c.value[t]){if(r=P(e,i,t),n=E(e,i,t),null===r){c.value[t]=n.value[t];continue}if(null===n){c.value[t]=r.value[t];continue}F(c,r,n,t)}}}(e,t)}function P(e,i,t){for(;i>=0;){var r=e[i];if(null!==r.value[t])return r;i--}return null}function E(e,i,t){for(;i<e.length;){var r=e[i];if(null!==r.value[t])return r;i++}return null}function F(e,t,r,n){r.time-t.time!=0?e.value[n]=(e.time-t.time)*(r.value[n]-t.value[n])/(r.time-t.time)+t.value[n]:e.value[n]=t.value[n]}function R(data){for(var e=[],t=data.name,r=data.end-data.start||-1,n=data.animations,i=0,o=n.length;i<o;i++)for(var c=A(n[i]),l=0,d=c.length;l<d;l++)e.push(c[l]);return new f.AnimationClip(t,r,e)}function C(e){return y(at.clips[e],R)}function B(e){for(var data={sources:{}},i=0,t=e.childNodes.length;i<t;i++){var n=e.childNodes[i];if(1===n.nodeType)switch(n.nodeName){case"bind_shape_matrix":data.bindShapeMatrix=r(n.textContent);break;case"source":var o=n.getAttribute("id");data.sources[o]=fe(n);break;case"joints":data.joints=L(n);break;case"vertex_weights":data.vertexWeights=j(n)}}return data}function L(e){for(var data={inputs:{}},i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType&&"input"===r.nodeName){var n=r.getAttribute("semantic"),c=o(r.getAttribute("source"));data.inputs[n]=c}}return data}function j(e){for(var data={inputs:{}},i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType)switch(r.nodeName){case"input":var c=r.getAttribute("semantic"),l=o(r.getAttribute("source")),d=parseInt(r.getAttribute("offset"));data.inputs[c]={id:l,offset:d};break;case"vcount":data.vcount=n(r.textContent);break;case"v":data.v=n(r.textContent)}}return data}function I(data){var e={id:data.id},t=at.geometries[e.id];return void 0!==data.skin&&(e.skin=function(data){var i,e,t,r=4,n={joints:[],indices:{array:[],stride:r},weights:{array:[],stride:r}},o=data.sources,c=data.vertexWeights,l=c.vcount,d=c.v,h=c.inputs.JOINT.offset,m=c.inputs.WEIGHT.offset,v=data.sources[data.joints.inputs.JOINT],y=data.sources[data.joints.inputs.INV_BIND_MATRIX],w=o[c.inputs.WEIGHT.id].array,_=0;for(i=0,t=l.length;i<t;i++){var x=l[i],A=[];for(e=0;e<x;e++){var M=d[_+h],N=w[d[_+m]];A.push({index:M,weight:N}),_+=2}for(A.sort(T),e=0;e<r;e++){var k=A[e];void 0!==k?(n.indices.array.push(k.index),n.weights.array.push(k.weight)):(n.indices.array.push(0),n.weights.array.push(0))}}data.bindShapeMatrix?n.bindMatrix=(new f.Matrix4).fromArray(data.bindShapeMatrix).transpose():n.bindMatrix=(new f.Matrix4).identity();for(i=0,t=v.array.length;i<t;i++){var O=v.array[i],S=(new f.Matrix4).fromArray(y.array,i*y.stride).transpose();n.joints.push({name:O,boneInverse:S})}return n;function T(a,b){return b.weight-a.weight}}(data.skin),t.sources.skinIndices=e.skin.indices,t.sources.skinWeights=e.skin.weights),e}function V(data){return void 0!==data.build?data.build:data.init_from}function H(e){var data=at.images[e];return void 0!==data?y(data,V):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",e),null)}function W(e){for(var data={surfaces:{},samplers:{}},i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType)switch(r.nodeName){case"newparam":z(r,data);break;case"technique":data.technique=D(r);break;case"extra":data.extra=Z(r)}}return data}function z(e,data){for(var t=e.getAttribute("sid"),i=0,r=e.childNodes.length;i<r;i++){var n=e.childNodes[i];if(1===n.nodeType)switch(n.nodeName){case"surface":data.surfaces[t]=U(n);break;case"sampler2D":data.samplers[t]=G(n)}}}function U(e){for(var data={},i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType&&"init_from"===r.nodeName)data.init_from=r.textContent}return data}function G(e){for(var data={},i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType&&"source"===r.nodeName)data.source=r.textContent}return data}function D(e){for(var data={},i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType)switch(r.nodeName){case"constant":case"lambert":case"blinn":case"phong":data.type=r.nodeName,data.parameters=J(r)}}return data}function J(e){for(var data={},i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType)switch(r.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":data[r.nodeName]=X(r);break;case"transparent":data[r.nodeName]={opaque:r.getAttribute("opaque"),data:X(r)}}}return data}function X(e){for(var data={},i=0,t=e.childNodes.length;i<t;i++){var n=e.childNodes[i];if(1===n.nodeType)switch(n.nodeName){case"color":data[n.nodeName]=r(n.textContent);break;case"float":data[n.nodeName]=parseFloat(n.textContent);break;case"texture":data[n.nodeName]={id:n.getAttribute("texture"),extra:Q(n)}}}return data}function Q(e){for(var data={technique:{}},i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType&&"extra"===r.nodeName)K(r,data)}return data}function K(e,data){for(var i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType&&"technique"===r.nodeName)Y(r,data)}}function Y(e,data){for(var i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType)switch(r.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":data.technique[r.nodeName]=parseFloat(r.textContent);break;case"wrapU":case"wrapV":"TRUE"===r.textContent.toUpperCase()?data.technique[r.nodeName]=1:"FALSE"===r.textContent.toUpperCase()?data.technique[r.nodeName]=0:data.technique[r.nodeName]=parseInt(r.textContent)}}}function Z(e){for(var data={},i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType&&"technique"===r.nodeName)data.technique=$(r)}return data}function $(e){for(var data={},i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType&&"double_sided"===r.nodeName)data[r.nodeName]=parseInt(r.textContent)}return data}function ee(data){return data}function te(data){var e,t,r=(e=data.url,y(at.effects[e],ee)),n=r.profile.technique,o=r.profile.extra;switch(n.type){case"phong":case"blinn":t=new f.MeshPhongMaterial;break;case"lambert":t=new f.MeshLambertMaterial;break;default:t=new f.MeshBasicMaterial}function l(e){var t=r.profile.samplers[e.id],image=null;void 0!==t?image=H(r.profile.surfaces[t.source].init_from):(console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),image=H(e.id));if(null!==image){var n=function(image){var e,t=image.slice(2+(image.lastIndexOf(".")-1>>>0));e="tga"===(t=t.toLowerCase())?Ze:et;return e}(image);if(void 0!==n){var o=n.load(image),l=e.extra;if(void 0!==l&&void 0!==l.technique&&!1===c(l.technique)){var d=l.technique;o.wrapS=d.wrapU?f.RepeatWrapping:f.ClampToEdgeWrapping,o.wrapT=d.wrapV?f.RepeatWrapping:f.ClampToEdgeWrapping,o.offset.set(d.offsetU||0,d.offsetV||0),o.repeat.set(d.repeatU||1,d.repeatV||1)}else o.wrapS=f.RepeatWrapping,o.wrapT=f.RepeatWrapping;return o}return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",image),null}return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",e.id),null}t.name=data.name||"";var d=n.parameters;for(var h in d){var m=d[h];switch(h){case"diffuse":m.color&&t.color.fromArray(m.color),m.texture&&(t.map=l(m.texture));break;case"specular":m.color&&t.specular&&t.specular.fromArray(m.color),m.texture&&(t.specularMap=l(m.texture));break;case"bump":m.texture&&(t.normalMap=l(m.texture));break;case"ambient":m.texture&&(t.lightMap=l(m.texture));break;case"shininess":m.float&&t.shininess&&(t.shininess=m.float);break;case"emission":m.color&&t.emissive&&t.emissive.fromArray(m.color),m.texture&&(t.emissiveMap=l(m.texture))}}var v=d.transparent,w=d.transparency;if(void 0===w&&v&&(w={float:1}),void 0===v&&w&&(v={opaque:"A_ONE",data:{color:[1,1,1,1]}}),v&&w)if(v.data.texture)t.transparent=!0;else{var _=v.data.color;switch(v.opaque){case"A_ONE":t.opacity=_[3]*w.float;break;case"RGB_ZERO":t.opacity=1-_[0]*w.float;break;case"A_ZERO":t.opacity=1-_[3]*w.float;break;case"RGB_ONE":t.opacity=_[0]*w.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',v.opaque)}t.opacity<1&&(t.transparent=!0)}return void 0!==o&&void 0!==o.technique&&1===o.technique.double_sided&&(t.side=f.DoubleSide),t}function re(e){return y(at.materials[e],te)}function ie(e){for(var i=0;i<e.childNodes.length;i++){var t=e.childNodes[i];if("technique_common"===t.nodeName)return ne(t)}return{}}function ne(e){for(var data={},i=0;i<e.childNodes.length;i++){var t=e.childNodes[i];switch(t.nodeName){case"perspective":case"orthographic":data.technique=t.nodeName,data.parameters=ae(t)}}return data}function ae(e){for(var data={},i=0;i<e.childNodes.length;i++){var t=e.childNodes[i];switch(t.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":data[t.nodeName]=parseFloat(t.textContent)}}return data}function se(data){var e;switch(data.optics.technique){case"perspective":e=new f.PerspectiveCamera(data.optics.parameters.yfov,data.optics.parameters.aspect_ratio,data.optics.parameters.znear,data.optics.parameters.zfar);break;case"orthographic":var t=data.optics.parameters.ymag,r=data.optics.parameters.xmag,n=data.optics.parameters.aspect_ratio;r=void 0===r?t*n:r,t=void 0===t?r/n:t,r*=.5,t*=.5,e=new f.OrthographicCamera(-r,r,t,-t,data.optics.parameters.znear,data.optics.parameters.zfar);break;default:e=new f.PerspectiveCamera}return e.name=data.name||"",e}function oe(e){var data=at.cameras[e];return void 0!==data?y(data,se):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",e),null)}function ce(e){for(var data={},i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType)switch(r.nodeName){case"directional":case"point":case"spot":case"ambient":data.technique=r.nodeName,data.parameters=ue(r)}}return data}function ue(e){for(var data={},i=0,t=e.childNodes.length;i<t;i++){var n=e.childNodes[i];if(1===n.nodeType)switch(n.nodeName){case"color":var o=r(n.textContent);data.color=(new f.Color).fromArray(o);break;case"falloff_angle":data.falloffAngle=parseFloat(n.textContent);break;case"quadratic_attenuation":var c=parseFloat(n.textContent);data.distance=c?Math.sqrt(1/c):0}}return data}function le(data){var e;switch(data.technique){case"directional":e=new f.DirectionalLight;break;case"point":e=new f.PointLight;break;case"spot":e=new f.SpotLight;break;case"ambient":e=new f.AmbientLight}return data.parameters.color&&e.color.copy(data.parameters.color),data.parameters.distance&&(e.distance=data.parameters.distance),e}function de(e){var data=at.lights[e];return void 0!==data?y(data,le):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",e),null)}function fe(n){for(var data={array:[],stride:3},i=0;i<n.childNodes.length;i++){var o=n.childNodes[i];if(1===o.nodeType)switch(o.nodeName){case"float_array":data.array=r(o.textContent);break;case"Name_array":data.array=t(o.textContent);break;case"technique_common":var c=e(o,"accessor")[0];void 0!==c&&(data.stride=parseInt(c.getAttribute("stride")))}}return data}function he(e){for(var data={},i=0;i<e.childNodes.length;i++){var t=e.childNodes[i];1===t.nodeType&&(data[t.getAttribute("semantic")]=o(t.getAttribute("source")))}return data}function pe(e){for(var t={type:e.nodeName,material:e.getAttribute("material"),count:parseInt(e.getAttribute("count")),inputs:{},stride:0,hasUV:!1},i=0,r=e.childNodes.length;i<r;i++){var c=e.childNodes[i];if(1===c.nodeType)switch(c.nodeName){case"input":var l=o(c.getAttribute("source")),d=c.getAttribute("semantic"),f=parseInt(c.getAttribute("offset")),h=parseInt(c.getAttribute("set")),m=h>0?d+h:d;t.inputs[m]={id:l,offset:f},t.stride=Math.max(t.stride,f+1),"TEXCOORD"===d&&(t.hasUV=!0);break;case"vcount":t.vcount=n(c.textContent);break;case"p":t.p=n(c.textContent)}}return t}function me(e){for(var t=0,i=0,r=e.length;i<r;i++){!0===e[i].hasUV&&t++}t>0&&t<e.length&&(e.uvsNeedsFix=!0)}function ve(data){var e={},t=data.sources,r=data.vertices,n=data.primitives;if(0===n.length)return{};var o=function(e){for(var t={},i=0;i<e.length;i++){var r=e[i];void 0===t[r.type]&&(t[r.type]=[]),t[r.type].push(r)}return t}(n);for(var c in o){var l=o[c];me(l),e[c]=ge(l,t,r)}return e}function ge(e,t,r){for(var n={},o={array:[],stride:0},c={array:[],stride:0},l={array:[],stride:0},d={array:[],stride:0},h={array:[],stride:0},m=[],v=4,y=[],w=4,_=new f.BufferGeometry,x=[],A=0,p=0;p<e.length;p++){var M=e[p],N=M.inputs,k=0;switch(M.type){case"lines":case"linestrips":k=2*M.count;break;case"triangles":k=3*M.count;break;case"polylist":for(var g=0;g<M.count;g++){var O=M.vcount[g];switch(O){case 3:k+=3;break;case 4:k+=6;break;default:k+=3*(O-2)}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",M.type)}for(var S in _.addGroup(A,k,p),A+=k,M.material&&x.push(M.material),N){var input=N[S];switch(S){case"VERTEX":for(var T in r){var P=r[T];switch(T){case"POSITION":var E=o.array.length;if(be(M,t[P],input.offset,o.array),o.stride=t[P].stride,t.skinWeights&&t.skinIndices&&(be(M,t.skinIndices,input.offset,m),be(M,t.skinWeights,input.offset,y)),!1===M.hasUV&&!0===e.uvsNeedsFix)for(var F=(o.array.length-E)/o.stride,i=0;i<F;i++)l.array.push(0,0);break;case"NORMAL":be(M,t[P],input.offset,c.array),c.stride=t[P].stride;break;case"COLOR":be(M,t[P],input.offset,h.array),h.stride=t[P].stride;break;case"TEXCOORD":be(M,t[P],input.offset,l.array),l.stride=t[P].stride;break;case"TEXCOORD1":be(M,t[P],input.offset,d.array),l.stride=t[P].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',T)}}break;case"NORMAL":be(M,t[input.id],input.offset,c.array),c.stride=t[input.id].stride;break;case"COLOR":be(M,t[input.id],input.offset,h.array),h.stride=t[input.id].stride;break;case"TEXCOORD":be(M,t[input.id],input.offset,l.array),l.stride=t[input.id].stride;break;case"TEXCOORD1":be(M,t[input.id],input.offset,d.array),d.stride=t[input.id].stride}}}return o.array.length>0&&_.setAttribute("position",new f.Float32BufferAttribute(o.array,o.stride)),c.array.length>0&&_.setAttribute("normal",new f.Float32BufferAttribute(c.array,c.stride)),h.array.length>0&&_.setAttribute("color",new f.Float32BufferAttribute(h.array,h.stride)),l.array.length>0&&_.setAttribute("uv",new f.Float32BufferAttribute(l.array,l.stride)),d.array.length>0&&_.setAttribute("uv2",new f.Float32BufferAttribute(d.array,d.stride)),m.length>0&&_.setAttribute("skinIndex",new f.Float32BufferAttribute(m,v)),y.length>0&&_.setAttribute("skinWeight",new f.Float32BufferAttribute(y,w)),n.data=_,n.type=e[0].type,n.materialKeys=x,n}function be(e,source,t,r){var n=e.p,o=e.stride,c=e.vcount;function l(i){for(var e=n[i+t]*f,o=e+f;e<o;e++)r.push(d[e])}var d=source.array,f=source.stride;if(void 0!==e.vcount)for(var h=0,i=0,m=c.length;i<m;i++){var v=c[i];if(4===v){var b=h+1*o,y=h+2*o,w=h+3*o;l(h+0*o),l(b),l(w),l(b),l(y),l(w)}else if(3===v){var _=h+1*o,x=h+2*o;l(h+0*o),l(_),l(x)}else if(v>4)for(var A=1,M=v-2;A<=M;A++){var N=h+o*A,k=h+o*(A+1);l(h+0*o),l(N),l(k)}h+=o*v}else for(var O=0,S=n.length;O<S;O+=o)l(O)}function ye(e){return y(at.geometries[e],ve)}function we(data){return void 0!==data.build?data.build:data}function _e(e,data){for(var i=0;i<e.childNodes.length;i++){var t=e.childNodes[i];if(1===t.nodeType)switch(t.nodeName){case"joint":data.joints[t.getAttribute("sid")]=xe(t);break;case"link":data.links.push(Me(t))}}}function xe(e){for(var data,i=0;i<e.childNodes.length;i++){var t=e.childNodes[i];if(1===t.nodeType)switch(t.nodeName){case"prismatic":case"revolute":data=Ae(t)}}return data}function Ae(e){for(var data={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",axis:new f.Vector3,limits:{min:0,max:0},type:e.nodeName,static:!1,zeroPosition:0,middlePosition:0},i=0;i<e.childNodes.length;i++){var t=e.childNodes[i];if(1===t.nodeType)switch(t.nodeName){case"axis":var n=r(t.textContent);data.axis.fromArray(n);break;case"limits":var o=t.getElementsByTagName("max")[0],c=t.getElementsByTagName("min")[0];data.limits.max=parseFloat(o.textContent),data.limits.min=parseFloat(c.textContent)}}return data.limits.min>=data.limits.max&&(data.static=!0),data.middlePosition=(data.limits.min+data.limits.max)/2,data}function Me(e){for(var data={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",attachments:[],transforms:[]},i=0;i<e.childNodes.length;i++){var t=e.childNodes[i];if(1===t.nodeType)switch(t.nodeName){case"attachment_full":data.attachments.push(Ne(t));break;case"matrix":case"translate":case"rotate":data.transforms.push(ke(t))}}return data}function Ne(e){for(var data={joint:e.getAttribute("joint").split("/").pop(),transforms:[],links:[]},i=0;i<e.childNodes.length;i++){var t=e.childNodes[i];if(1===t.nodeType)switch(t.nodeName){case"link":data.links.push(Me(t));break;case"matrix":case"translate":case"rotate":data.transforms.push(ke(t))}}return data}function ke(e){var data={type:e.nodeName},t=r(e.textContent);switch(data.type){case"matrix":data.obj=new f.Matrix4,data.obj.fromArray(t).transpose();break;case"translate":data.obj=new f.Vector3,data.obj.fromArray(t);break;case"rotate":data.obj=new f.Vector3,data.obj.fromArray(t),data.angle=f.MathUtils.degToRad(t[3])}return data}function Oe(e,data){for(var i=0;i<e.childNodes.length;i++){var t=e.childNodes[i];if(1===t.nodeType&&"technique_common"===t.nodeName)Se(t,data)}}function Se(e,data){for(var i=0;i<e.childNodes.length;i++){var t=e.childNodes[i];if(1===t.nodeType)switch(t.nodeName){case"inertia":data.inertia=r(t.textContent);break;case"mass":data.mass=r(t.textContent)[0]}}}function Te(e){for(var data={target:e.getAttribute("target").split("/").pop()},i=0;i<e.childNodes.length;i++){var t=e.childNodes[i];if(1===t.nodeType&&"axis"===t.nodeName){var param=t.getElementsByTagName("param")[0];data.axis=param.textContent;var r=data.axis.split("inst_").pop().split("axis")[0];data.jointIndex=r.substr(0,r.length-1)}}return data}function Pe(data){return void 0!==data.build?data.build:data}function Ee(e){for(var t=[],n=Je.querySelector('[id="'+e.id+'"]'),i=0;i<n.childNodes.length;i++){var o=n.childNodes[i];if(1===o.nodeType){var c=void 0,l=void 0;switch(o.nodeName){case"matrix":c=r(o.textContent);var d=(new f.Matrix4).fromArray(c).transpose();t.push({sid:o.getAttribute("sid"),type:o.nodeName,obj:d});break;case"translate":case"scale":c=r(o.textContent),l=(new f.Vector3).fromArray(c),t.push({sid:o.getAttribute("sid"),type:o.nodeName,obj:l});break;case"rotate":c=r(o.textContent),l=(new f.Vector3).fromArray(c);var h=f.MathUtils.degToRad(c[3]);t.push({sid:o.getAttribute("sid"),type:o.nodeName,obj:l,angle:h})}}}return t}var Fe=new f.Matrix4,Re=new f.Vector3;function Ce(e){for(var data={name:e.getAttribute("name")||"",type:e.getAttribute("type"),id:e.getAttribute("id"),sid:e.getAttribute("sid"),matrix:new f.Matrix4,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},i=0;i<e.childNodes.length;i++){var t=e.childNodes[i];if(1===t.nodeType){var n=void 0;switch(t.nodeName){case"node":data.nodes.push(t.getAttribute("id")),Ce(t);break;case"instance_camera":data.instanceCameras.push(o(t.getAttribute("url")));break;case"instance_controller":data.instanceControllers.push(Be(t));break;case"instance_light":data.instanceLights.push(o(t.getAttribute("url")));break;case"instance_geometry":data.instanceGeometries.push(Be(t));break;case"instance_node":data.instanceNodes.push(o(t.getAttribute("url")));break;case"matrix":n=r(t.textContent),data.matrix.multiply(Fe.fromArray(n).transpose()),data.transforms[t.getAttribute("sid")]=t.nodeName;break;case"translate":n=r(t.textContent),Re.fromArray(n),data.matrix.multiply(Fe.makeTranslation(Re.x,Re.y,Re.z)),data.transforms[t.getAttribute("sid")]=t.nodeName;break;case"rotate":n=r(t.textContent);var c=f.MathUtils.degToRad(n[3]);data.matrix.multiply(Fe.makeRotationAxis(Re.fromArray(n),c)),data.transforms[t.getAttribute("sid")]=t.nodeName;break;case"scale":n=r(t.textContent),data.matrix.scale(Re.fromArray(n)),data.transforms[t.getAttribute("sid")]=t.nodeName;break;case"extra":break;default:console.log(t)}}}return We(data.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",data.id):at.nodes[data.id]=data,data}function Be(e){for(var data={id:o(e.getAttribute("url")),materials:{},skeletons:[]},i=0;i<e.childNodes.length;i++){var t=e.childNodes[i];switch(t.nodeName){case"bind_material":for(var r=t.getElementsByTagName("instance_material"),n=0;n<r.length;n++){var c=r[n],symbol=c.getAttribute("symbol"),l=c.getAttribute("target");data.materials[symbol]=o(l)}break;case"skeleton":data.skeletons.push(o(t.textContent))}}return data}function Le(e,t){var i,r,data,n,o=[],c=[];for(i=0;i<e.length;i++){var l=e[i];if(We(l))je(ze(l),t,o);else if(n=l,void 0!==at.visualScenes[n])for(var d=at.visualScenes[l].children,h=0;h<d.length;h++){var m=d[h];if("JOINT"===m.type)je(ze(m.id),t,o)}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",l)}for(i=0;i<t.length;i++)for(r=0;r<o.length;r++)if((data=o[r]).bone.name===t[i].name){c[i]=data,data.processed=!0;break}for(i=0;i<o.length;i++)!1===(data=o[i]).processed&&(c.push(data),data.processed=!0);var v=[],y=[];for(i=0;i<c.length;i++)data=c[i],v.push(data.bone),y.push(data.boneInverse);return new f.Skeleton(v,y)}function je(e,t,r){e.traverse((function(object){if(!0===object.isBone){for(var e,i=0;i<t.length;i++){var n=t[i];if(n.name===object.name){e=n.boneInverse;break}}void 0===e&&(e=new f.Matrix4),r.push({bone:object,boneInverse:e,processed:!1})}}))}function Ie(data){for(var e,object,t=[],r=data.matrix,n=data.nodes,o=data.type,c=data.instanceCameras,l=data.instanceControllers,d=data.instanceLights,h=data.instanceGeometries,m=data.instanceNodes,i=0,v=n.length;i<v;i++)t.push(ze(n[i]));for(var w=0,_=c.length;w<_;w++){var x=oe(c[w]);null!==x&&t.push(x.clone())}for(var A=0,M=l.length;A<M;A++)for(var N=l[A],k=(e=N.id,y(at.controllers[e],I)),O=He(ye(k.id),N.materials),S=Le(N.skeletons,k.skin.joints),T=0,P=O.length;T<P;T++){var E=O[T];E.isSkinnedMesh&&(E.bind(S,k.skin.bindMatrix),E.normalizeSkinWeights()),t.push(E)}for(var F=0,R=d.length;F<R;F++){var C=de(d[F]);null!==C&&t.push(C.clone())}for(var B=0,L=h.length;B<L;B++)for(var j=h[B],V=He(ye(j.id),j.materials),H=0,W=V.length;H<W;H++)t.push(V[H]);for(var z=0,U=m.length;z<U;z++)t.push(ze(m[z]).clone());if(0===n.length&&1===t.length)object=t[0];else{object="JOINT"===o?new f.Bone:new f.Group;for(var G=0;G<t.length;G++)object.add(t[G])}return object.name="JOINT"===o?data.sid:data.name,object.matrix.copy(r),object.matrix.decompose(object.position,object.quaternion,object.scale),object}var qe=new f.MeshBasicMaterial({color:16711935});function Ve(e,t){for(var r=[],i=0,n=e.length;i<n;i++){var o=t[e[i]];void 0===o?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",e[i]),r.push(qe)):r.push(re(o))}return r}function He(e,t){var r=[];for(var n in e){var o=e[n],c=Ve(o.materialKeys,t);0===c.length&&("lines"===n||"linestrips"===n?c.push(new f.LineBasicMaterial):c.push(new f.MeshPhongMaterial));var l=void 0!==o.data.attributes.skinIndex,d=1===c.length?c[0]:c,object=void 0;switch(n){case"lines":object=new f.LineSegments(o.data,d);break;case"linestrips":object=new f.Line(o.data,d);break;case"triangles":case"polylist":object=l?new f.SkinnedMesh(o.data,d):new f.Mesh(o.data,d)}r.push(object)}return r}function We(e){return void 0!==at.nodes[e]}function ze(e){return y(at.nodes[e],Ie)}function Ue(data){var e=new f.Group;e.name=data.name;for(var t=data.children,i=0;i<t.length;i++){var r=t[i];e.add(ze(r.id))}return e}function Ge(e){return y(at.visualScenes[e],Ue)}if(0===text.length)return{scene:new f.Scene};var De=(new DOMParser).parseFromString(text,"application/xml"),Je=e(De,"COLLADA")[0],Xe=De.getElementsByTagName("parsererror")[0];if(void 0!==Xe){var Qe,Ke=e(Xe,"div")[0];return Qe=Ke?Ke.textContent:function(e){for(var t="",r=[e];r.length;){var n=r.shift();n.nodeType===Node.TEXT_NODE?t+=n.textContent:(t+="\n",r.push.apply(r,n.childNodes))}return t.trim()}(Xe),console.error("THREE.ColladaLoader: Failed to parse collada file.\n",Qe),null}var Ye=Je.getAttribute("version");console.log("THREE.ColladaLoader: File version",Ye);var Ze,$e=function(t){return{unit:l(e(t,"unit")[0]),upAxis:d(e(t,"up_axis")[0])}}(e(Je,"asset")[0]),et=new f.TextureLoader(this.manager);et.setPath(this.resourcePath||path).setCrossOrigin(this.crossOrigin),m&&(Ze=new m(this.manager)).setPath(this.resourcePath||path);var tt=[],it={},nt=0,at={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};h(Je,"library_animations","animation",(function e(t){for(var data={sources:{},samplers:{},channels:{}},r=!1,i=0,n=t.childNodes.length;i<n;i++){var o=t.childNodes[i];if(1===o.nodeType){var c=void 0;switch(o.nodeName){case"source":c=o.getAttribute("id"),data.sources[c]=fe(o);break;case"sampler":c=o.getAttribute("id"),data.samplers[c]=w(o);break;case"channel":c=o.getAttribute("target"),data.channels[c]=_(o);break;case"animation":e(o),r=!0;break;default:console.log(o)}}}!1===r&&(at.animations[t.getAttribute("id")||f.MathUtils.generateUUID()]=data)})),h(Je,"library_animation_clips","animation_clip",(function(e){for(var data={name:e.getAttribute("id")||"default",start:parseFloat(e.getAttribute("start")||0),end:parseFloat(e.getAttribute("end")||0),animations:[]},i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType&&"instance_animation"===r.nodeName)data.animations.push(o(r.getAttribute("url")))}at.clips[e.getAttribute("id")]=data})),h(Je,"library_controllers","controller",(function(e){for(var data={},i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType)switch(r.nodeName){case"skin":data.id=o(r.getAttribute("source")),data.skin=B(r);break;case"morph":data.id=o(r.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.")}}at.controllers[e.getAttribute("id")]=data})),h(Je,"library_images","image",(function(t){var data={init_from:e(t,"init_from")[0].textContent};at.images[t.getAttribute("id")]=data})),h(Je,"library_effects","effect",(function(e){for(var data={},i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType&&"profile_COMMON"===r.nodeName)data.profile=W(r)}at.effects[e.getAttribute("id")]=data})),h(Je,"library_materials","material",(function(e){for(var data={name:e.getAttribute("name")},i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType&&"instance_effect"===r.nodeName)data.url=o(r.getAttribute("url"))}at.materials[e.getAttribute("id")]=data})),h(Je,"library_cameras","camera",(function(e){for(var data={name:e.getAttribute("name")},i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType&&"optics"===r.nodeName)data.optics=ie(r)}at.cameras[e.getAttribute("id")]=data})),h(Je,"library_lights","light",(function(e){for(var data={},i=0,t=e.childNodes.length;i<t;i++){var r=e.childNodes[i];if(1===r.nodeType&&"technique_common"===r.nodeName)data=ce(r)}at.lights[e.getAttribute("id")]=data})),h(Je,"library_geometries","geometry",(function(t){var data={name:t.getAttribute("name"),sources:{},vertices:{},primitives:[]},r=e(t,"mesh")[0];if(void 0!==r){for(var i=0;i<r.childNodes.length;i++){var n=r.childNodes[i];if(1===n.nodeType){var o=n.getAttribute("id");switch(n.nodeName){case"source":data.sources[o]=fe(n);break;case"vertices":data.vertices=he(n);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",n.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":data.primitives.push(pe(n));break;default:console.log(n)}}}at.geometries[t.getAttribute("id")]=data}})),h(Je,"library_nodes","node",Ce),h(Je,"library_visual_scenes","visual_scene",(function(t){var data={name:t.getAttribute("name"),children:[]};!function(e){for(var t=e.getElementsByTagName("node"),i=0;i<t.length;i++){var element=t[i];!1===element.hasAttribute("id")&&element.setAttribute("id","three_default_"+nt++)}}(t);for(var r=e(t,"node"),i=0;i<r.length;i++)data.children.push(Ce(r[i]));at.visualScenes[t.getAttribute("id")]=data})),h(Je,"library_kinematics_models","kinematics_model",(function(e){for(var data={name:e.getAttribute("name")||"",joints:{},links:[]},i=0;i<e.childNodes.length;i++){var t=e.childNodes[i];if(1===t.nodeType&&"technique_common"===t.nodeName)_e(t,data)}at.kinematicsModels[e.getAttribute("id")]=data})),h(Je,"library_physics_models","physics_model",(function(e){for(var data={name:e.getAttribute("name")||"",rigidBodies:{}},i=0;i<e.childNodes.length;i++){var t=e.childNodes[i];if(1===t.nodeType&&"rigid_body"===t.nodeName)data.rigidBodies[t.getAttribute("name")]={},Oe(t,data.rigidBodies[t.getAttribute("name")])}at.physicsModels[e.getAttribute("id")]=data})),h(Je,"scene","instance_kinematics_scene",(function(e){for(var data={bindJointAxis:[]},i=0;i<e.childNodes.length;i++){var t=e.childNodes[i];if(1===t.nodeType&&"bind_joint_axis"===t.nodeName)data.bindJointAxis.push(Te(t))}at.kinematicsScenes[o(e.getAttribute("url"))]=data})),v(at.animations,x),v(at.clips,R),v(at.controllers,I),v(at.images,V),v(at.effects,ee),v(at.materials,te),v(at.cameras,se),v(at.lights,le),v(at.geometries,ve),v(at.visualScenes,Ue),function(){var e=at.clips;if(!0===c(e)){if(!1===c(at.animations)){var t=[];for(var r in at.animations)for(var n=A(r),i=0,o=n.length;i<o;i++)t.push(n[i]);tt.push(new f.AnimationClip("default",-1,t))}}else for(var l in e)tt.push(C(l))}(),function(){var e=Object.keys(at.kinematicsModels)[0],t=Object.keys(at.kinematicsScenes)[0],r=Object.keys(at.visualScenes)[0];if(void 0!==e&&void 0!==t){for(var n,o=(n=e,y(at.kinematicsModels[n],we)),c=function(e){return y(at.kinematicsScenes[e],Pe)}(t),l=Ge(r),d=c.bindJointAxis,h={},i=0,m=d.length;i<m;i++){var v=d[i],w=Je.querySelector('[sid="'+v.target+'"]');if(w){var _=w.parentElement;A(v.jointIndex,_)}}var x=new f.Matrix4;it={joints:o&&o.joints,getJointValue:function(e){var t=h[e];if(t)return t.position;console.warn("THREE.ColladaLoader: Joint "+e+" doesn't exist.")},setJointValue:function(e,t){var r=h[e];if(r){var n=r.joint;if(t>n.limits.max||t<n.limits.min)console.warn("THREE.ColladaLoader: Joint "+e+" value "+t+" outside of limits (min: "+n.limits.min+", max: "+n.limits.max+").");else if(n.static)console.warn("THREE.ColladaLoader: Joint "+e+" is static.");else{var object=r.object,o=n.axis,c=r.transforms;Fe.identity();for(var l=0;l<c.length;l++){var d=c[l];if(d.sid&&-1!==d.sid.indexOf(e))switch(n.type){case"revolute":Fe.multiply(x.makeRotationAxis(o,f.MathUtils.degToRad(t)));break;case"prismatic":Fe.multiply(x.makeTranslation(o.x*t,o.y*t,o.z*t));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+n.type)}else switch(d.type){case"matrix":Fe.multiply(d.obj);break;case"translate":Fe.multiply(x.makeTranslation(d.obj.x,d.obj.y,d.obj.z));break;case"scale":Fe.scale(d.obj);break;case"rotate":Fe.multiply(x.makeRotationAxis(d.obj,d.angle))}}object.matrix.copy(Fe),object.matrix.decompose(object.position,object.quaternion,object.scale),h[e].position=t}}else console.log("THREE.ColladaLoader: "+e+" does not exist.")}}}function A(e,t){var r=t.getAttribute("name"),n=o.joints[e];l.traverse((function(object){object.name===r&&(h[e]={object:object,transforms:Ee(t),joint:n,position:n.zeroPosition})}))}}();var st=function(t){return Ge(o(e(t,"instance_visual_scene")[0].getAttribute("url")))}(e(Je,"scene")[0]);return st.animations=tt,"Z_UP"===$e.upAxis&&st.quaternion.setFromEuler(new f.Euler(-Math.PI/2,0,0)),st.scale.multiplyScalar($e.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),tt},kinematics:it,library:at,scene:st}}}]),r}(f.Loader)}}]);