(window.webpackJsonp=window.webpackJsonp||[]).push([[11,16],{194:function(e,t,n){"use strict";n.r(t);var r={data:function(){return{headerOverlay:!1,head:{title:"",description:""}}},watch:{headerOverlay:function(e,t){this.$root.$emit("headerOverlay",e)}},mounted:function(){this.$root.$emit("headerOverlay",this.headerOverlay)},head:function(){return{title:this.head.title,meta:[{hid:"description",name:"description",content:this.head.description}]}}},o=n(4),component=Object(o.a)(r,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null);t.default=component.exports},211:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n(212);var r=n(95),o=n(96),c=n(220),d=n(221),l=n(213),h=n(193);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var m=function(e){Object(c.a)(n,e);var t=f(n);function n(e,o){var c,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(r.a)(this,n),(c=t.call(this,e,"/oceanPostProcess",["time","fov","resolution","cameraPosition","cameraRotation","worldScale","lightDirection"],["positionSampler","reflectionSampler","refractionSampler","skyTexture"],{width:d.width||o.getEngine().getRenderWidth(),height:d.height||o.getEngine().getRenderHeight()},d.isPipeline?null:o,h.Texture.TRILINEAR_SAMPLINGMODE,o.getEngine(),!1))._time=0,c.worldScale=1,c._cameraRotation=h.Vector3.Zero(),c._cameraViewMatrix=h.Matrix.Identity(),c._reflectionEnabled=!1,c._refractionEnabled=!1,c._skyTexture=null,c._camera=o,c._options=d,c.reflectionTexture=null,c.refractionTexture=null,c._geometryRenderer=o.getScene().enableGeometryBufferRenderer(1),c.light="light"in d?d.light:null,c._geometryRenderer&&c._geometryRenderer.isSupported?c._geometryRenderer.enablePosition=!0:c.updateEffect("#define NOT_SUPPORTED\n"),c.onApply=function(e){if(c._geometryRenderer&&c._geometryRenderer.isSupported){var t=o.getEngine(),n=o.getScene();c._time+=.001*t.getDeltaTime(),e.setFloat("time",c._time);e.setVector2("resolution",new h.Vector2(t.getRenderWidth()/1,t.getRenderHeight()/1)),n&&(e.setVector3("cameraPosition",o.globalPosition),c._computeCameraRotation(o),e.setVector3("cameraRotation",c._cameraRotation),e.setVector3("lightDirection",c.light?c.light.direction:new h.Vector3(.2,-1,0)),e.setFloat("fov",o.fov),e.setFloat("worldScale",c.worldScale),e.setTexture("positionSampler",c._geometryRenderer.getGBuffer().textures[2]),c._reflectionEnabled&&e.setTexture("reflectionSampler",c.reflectionTexture),c._refractionEnabled&&e.setTexture("refractionSampler",c.refractionTexture),c._skyTexture&&e.setTexture("skyTexture",c._skyTexture))}},c}return Object(o.a)(n,[{key:"reflectionEnabled",get:function(){return this._reflectionEnabled},set:function(e){if(this._reflectionEnabled!==e){this._reflectionEnabled=e,e&&!this.reflectionTexture&&(this.reflectionTexture=new h.MirrorTexture("oceanPostProcessReflection",this._options.reflectionSize||{width:512,height:512},this._camera.getScene()),this.reflectionTexture.mirrorPlane=h.Plane.FromPositionAndNormal(h.Vector3.Zero(),new h.Vector3(0,-1,0))),this.updateEffect(this._getDefines());var t=this.getCamera().getScene().customRenderTargets;if(e)t.push(this.reflectionTexture);else{var n=t.indexOf(this.reflectionTexture);-1!==n&&t.splice(n,1)}}}},{key:"refractionEnabled",get:function(){return this._refractionEnabled},set:function(e){if(this._refractionEnabled!==e){this._refractionEnabled=e,e&&!this.refractionTexture&&(this.refractionTexture=new h.RenderTargetTexture("oceanPostProcessRefraction",this._options.refractionSize||{width:512,height:512},this._camera.getScene())),this.updateEffect(this._getDefines());var t=this.getCamera().getScene().customRenderTargets;if(e)t.push(this.refractionTexture);else{var n=t.indexOf(this.refractionTexture);-1!==n&&t.splice(n,1)}}}},{key:"skyTexture",set:function(e){this._skyTexture=e,this.updateEffect(this._getDefines())}},{key:"isSupported",get:function(){return null!==this._geometryRenderer&&this._geometryRenderer.isSupported}},{key:"_getDefines",value:function(){var e=[];return this._reflectionEnabled&&e.push("#define REFLECTION_ENABLED"),this._refractionEnabled&&e.push("#define REFRACTION_ENABLED"),this._skyTexture&&e.push("#define SKY_ENABLED"),e.join("\n")}},{key:"_computeCameraRotation",value:function(e){e.upVector.normalize();var t=e.getTarget();e._initialFocalDistance=t.subtract(e.position).length(),e.position.z===t.z&&(e.position.z+=h.Epsilon);var n=t.subtract(e.position);e._viewMatrix.invertToRef(this._cameraViewMatrix),this._cameraRotation.x=Math.atan(this._cameraViewMatrix.m[6]/this._cameraViewMatrix.m[10]),n.x>=0?this._cameraRotation.y=-Math.atan(n.z/n.x)+Math.PI/2:this._cameraRotation.y=-Math.atan(n.z/n.x)-Math.PI/2,this._cameraRotation.z=0,isNaN(this._cameraRotation.x)&&(this._cameraRotation.x=0),isNaN(this._cameraRotation.y)&&(this._cameraRotation.y=0),isNaN(this._cameraRotation.z)&&(this._cameraRotation.z=0)}}]),n}(h.PostProcess)},226:function(e,t,n){"use strict";n(35),n(15),n(21),n(38),n(36),n(37);var r=n(95),o=n(96),c=(n(27),n(193));function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){d=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var h=function(){function e(t,n,o){Object(r.a)(this,e),this.id=t,this.position=n,this.velocity=o,this.force=new c.Vector3(0,0,0)}return Object(o.a)(e,[{key:"orientation",get:function(){return this.velocity.normalize()}}]),e}(),f=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object(r.a)(this,e),this.cohesion=.3,this.separation=.4,this.alignment=1,this.separationMinDistance=3,this.maxSpeed=1,this.boundsMin=new c.Vector3(n.x-d,n.y-d,n.z-d),this.boundsMax=new c.Vector3(n.x+d,n.y+d,n.z+d),this.calculateBounds(),this.otherForces=[],this.boids=[],this.debug={show:!1,influences:[],arrows:[]},this.center=n.clone(),this.avgVel=new c.Vector3(0,0,0),this.reset(t,o,l)}return Object(o.a)(e,[{key:"reset",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n||(n=new c.Vector3(t/5,0,t/5)),this.boids=[];for(var r=n.length(),i=0;i<e;i++){var o=this.center.add(new c.Vector3((Math.random()-.5)*t,(Math.random()-.5)*t,(Math.random()-.5)*t)),d=new c.Vector3(n.x+(Math.random()-.5)/10*r,n.y+(Math.random()-.5)/10*r,n.z+(Math.random()-.5)/10*r),l=new h(i,o,d);this.boids.push(l)}}},{key:"calculateBounds",value:function(){this.sizeVector=new c.Vector3(Math.abs(this.boundsMax.x-this.boundsMin.x),Math.abs(this.boundsMax.y-this.boundsMin.y),Math.abs(this.boundsMax.z-this.boundsMin.z))}},{key:"updateForces",value:function(){var e=this;this._updateCenter(),this.boids.forEach((function(t){var n=e._forceCentreMass(t),r=e._forceSeparation(t),o=e._forceMatchVelocity(t),c=e._forceBoundaries(t),d=n.add(r).add(o).add(c);e.otherForces.forEach((function(n){d.add(n(e,t))})),t.force.copyFrom(d)}))}},{key:"updatePositions",value:function(e){this.boids.forEach((function(t){t.velocity.addInPlace(t.force.scale(e)),t.position.addInPlace(t.velocity.scale(e))}))}},{key:"update",value:function(e){this.updateForces(),this.updatePositions(),this._updateDebug()}},{key:"_updateCenter",value:function(){if(this.boids.length){var e=new c.Vector3(0,0,0),t=new c.Vector3(0,0,0);this.boids.forEach((function(n){e.addInPlace(n.position),t.addInPlace(n.velocity)})),e.scaleInPlace(1/this.boids.length),t.scaleInPlace(1/this.boids.length),this.center=e,this.avgVel=t}}},{key:"_forceCentreMass",value:function(e){return this.center.subtract(e.position).scale(this.cohesion)}},{key:"_forceSeparation",value:function(e){var t=this,n=new c.Vector3(0,0,0);return this.boids.forEach((function(r){if(e.id!==r.id){var o=e.position.subtract(r.position),c=o.length();c<t.separationMinDistance&&n.addInPlace(o.scale(t.separationMinDistance-c))}})),n.scale(this.separation)}},{key:"_forceMatchVelocity",value:function(e){return this.avgVel.subtract(e.velocity).scale(this.alignment)}},{key:"_forceBoundaries",value:function(e){var t=new c.Vector3(0,0,0),n=.04;return e.position.x<this.boundsMin.x+.1*this.sizeVector.x?t.x=n:e.position.x>this.boundsMax.x-.1*this.sizeVector.x&&(t.x=-.04),e.position.y<this.boundsMin.y+.1*this.sizeVector.y?t.y=n:e.position.y>this.boundsMax.y-.1*this.sizeVector.y&&(t.y=-.04),e.position.z<this.boundsMin.z+.1*this.sizeVector.z?t.z=n:e.position.z>this.boundsMax.z-.1*this.sizeVector.z&&(t.z=-.04),t}},{key:"addForce",value:function(e){this.otherForces.push(e)}},{key:"showDebug",value:function(e){if(!this.debug.show){var t=new c.StandardMaterial("debug_center",e);t.diffuseColor=c.Color3.FromHexString("#FF00FF"),this.debug.center=c.MeshBuilder.CreateSphere("center",{diameter:.1,segments:8}),this.debug.center.material=t;var n=new c.StandardMaterial("debug_bbox",e);n.emissiveColor=c.Color3.FromHexString("#00FF00"),n.disableLighting=!0,n.wireframe=!0,this.debug.bbox=c.MeshBuilder.CreateBox("boids_bbox",{},e),this.debug.bbox.scaling.x=Math.abs(this.boundsMax.x-this.boundsMin.x),this.debug.bbox.scaling.y=Math.abs(this.boundsMax.y-this.boundsMin.y),this.debug.bbox.scaling.z=Math.abs(this.boundsMax.z-this.boundsMin.z),this.debug.bbox.position=this.boundsMin.add(this.boundsMax.subtract(this.boundsMin).scale(.5)),this.debug.bbox.material=n;var r=new c.StandardMaterial("debug_wireframe",e);r.diffuseColor=c.Color3.FromHexString("#FFFFFF"),r.wireframe=!0;var o,i=0,l=d(this.boids);try{for(l.s();!(o=l.n()).done;){var h=o.value;h.debug={},h.debug.force=c.MeshBuilder.CreateTube("boid_arrow_".concat(i),{path:[h.position.add(h.velocity),h.position.clone()],radius:.01,updatable:!0},e),h.debug.influence=c.MeshBuilder.CreateSphere("boid_influence_".concat(i),{diameter:this.separationMinDistance,segments:8}),h.debug.influence.material=r,i++}}catch(e){l.e(e)}finally{l.f()}this.debug.show=!0,this._updateDebug()}}},{key:"hideDebug",value:function(e){this.debug.show=!1,this.debug.center=void 0;var t,n=d(this.boids);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.debug&&(r.debug.force.dispose(),r.debug.influence.dispose(),r.debug={})}}catch(e){n.e(e)}finally{n.f()}}},{key:"_updateDebug",value:function(){if(this.debug.show){this.debug.center.position.copyFrom(this.center);var e,t=d(this.boids);try{for(t.s();!(e=t.n()).done;){var n=e.value,path=[n.position.add(n.velocity.scale(10)),n.position.clone()];n.debug.force=c.MeshBuilder.CreateTube(n.debug.force.name,{path:path,radius:.01,instance:n.debug.force}),n.debug.influence.position.copyFrom(n.position)}}catch(e){t.e(e)}finally{t.f()}}}},{key:"gui",value:function(e){var t=this,n=c.GUI,r=n.AdvancedDynamicTexture.CreateFullscreenUI("UI",void 0,void 0,e),o=new n.StackPanel;o.width="220px",o.horizontalAlignment=n.Control.HORIZONTAL_ALIGNMENT_RIGHT,o.verticalAlignment=n.Control.VERTICAL_ALIGNMENT_CENTER,r.addControl(o);var d=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},header=new n.TextBlock;header.text="".concat(e," ").concat(t[e]),header.height="30px",header.color="white",o.addControl(header);var d=new n.Slider;d.minimum=0,d.maximum=r,d.value=t[e],d.height="20px",d.width="200px";var l=function(e,header,t){return function(n){e[t]=n,header.text="".concat(t," ").concat(n),c.apply(e)}}(t,header,e);d.onValueChangedObservable.add(l),o.addControl(d)};d("cohesion",1.5),d("separation"),d("alignment"),d("separationMinDistance",50,(function(e){t.debug.center&&t.boids.forEach((function(e){e.debug.influence.scaling.setAll(t.separationMinDistance)}))}));var header=new n.TextBlock;header.text="show debug helpers",header.height="30px",header.color="white",o.addControl(header);var l=new n.Checkbox;l.width="20px",l.height="20px",l.isChecked=this.debug.show,l.color="green",l.onIsCheckedChangedObservable.add((function(n){n?t.showDebug(e):t.hideDebug(e)})),o.addControl(l)}}]),e}();t.a=f},248:function(e,t,n){var content=n(333);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(34).default)("1eba19e4",content,!0,{sourceMap:!1})},332:function(e,t,n){"use strict";n(248)},333:function(e,t,n){var r=n(33)(!1);r.push([e.i,"#underwater[data-v-e457f282]{height:100vh;width:100%;position:relative}#underwater-3d[data-v-e457f282]{height:100vh;width:100vw}#underwater-debug[data-v-e457f282]{left:0;z-index:1000}#underwater-debug[data-v-e457f282],#underwater-hud[data-v-e457f282]{position:absolute;top:0;padding:10px;border-radius:10px;background:#000;color:#fff;text-align:right}#underwater-hud[data-v-e457f282]{right:0;width:160px;height:220px;z-index:10;font-family:monospace}@media (max-width:640px){#underwater-hud[data-v-e457f282]{width:120px;height:160px}}#underwater-hud span[data-v-e457f282]{display:inline-block}#underwater-hud #underwater-hud-compass[data-v-e457f282],#underwater-hud #underwater-hud-time[data-v-e457f282]{margin-top:10px}#underwater-hud #underwater-hud-compass-value[data-v-e457f282],#underwater-hud #underwater-hud-depth-value[data-v-e457f282],#underwater-hud #underwater-hud-time-value[data-v-e457f282]{line-height:.9;font-size:42px;font-family:monospace}@media (max-width:640px){#underwater-hud #underwater-hud-compass-value[data-v-e457f282],#underwater-hud #underwater-hud-depth-value[data-v-e457f282],#underwater-hud #underwater-hud-time-value[data-v-e457f282]{font-size:24px}}#underwater-hud #underwater-hud-depth-ascent[data-v-e457f282]{-ms-writing-mode:tb-rl;writing-mode:vertical-rl}#underwater-hud #underwater-hud-compass-name[data-v-e457f282],#underwater-hud #underwater-hud-depth-name[data-v-e457f282],#underwater-hud #underwater-hud-time-name[data-v-e457f282]{color:#4c70ff}#underwater-hud #underwater-hud-depth-unit[data-v-e457f282],#underwater-hud #underwater-hud-time-unit[data-v-e457f282]{vertical-align:top}.button-giant[data-v-e457f282]{line-height:1.2em;border-radius:10px;font-size:32px;background:#004;color:#fff;text-align:center;padding:14px}#underwater-fullscreen[data-v-e457f282]{position:absolute;top:20px;left:0;margin:0;z-index:1;max-width:80%}#underwater-instructions[data-v-e457f282]{position:absolute;top:0;left:0;bottom:0;right:0;z-index:1000;color:#fff;display:flex;justify-content:center;align-items:center;background-color:rgba(0,0,0,.4);flex-direction:column;text-align:center;padding:20px}#underwater-instructions p[data-v-e457f282]{font-size:200%}#underwater-settings[data-v-e457f282]{position:absolute;bottom:0;right:0;padding:10px;z-index:1000;color:#fff;text-align:right}#underwater-settings svg[data-v-e457f282]{cursor:pointer}",""]),e.exports=r},425:function(e,t,n){"use strict";n.r(t);var r=n(194),o=n(6),c=n(95),d=n(96),l=(n(44),n(36),n(15),n(37),n(35),n(40),n(27),n(210),n(21),n(38),n(193)),h=(n(206),n(247)),f=(n(211),n(226));function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){d=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw o}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var w=function(){function e(t){var n=this;Object(c.a)(this,e),this.base="",this.engine=null,this.scene=null,this.camera=null,this.assetsManager=null,this.sunLight=null,this.oceanPostProcess=null,this.rebuildOceanTexture=!0,this.audioDiver=null,this.audioOcean=null,this.debugState=!1,this.turtles=[],this.animTour=null,l.GUI=h;var r=document.getElementById("underwater-3d");document.onfullscreenchange=function(e){t.isFullscreen=!!document.fullscreenElement},this.base=t.base,this.bootScene(r,t),this.lights(),this.camera.getScene().enableGeometryBufferRenderer(1).enablePosition=!0;var o=[],d=this.loadBoidsModel(this.base+"models/","sargentinho.glb",30,new l.Vector3(-33.12,-17.2,12.19),new l.Vector3(-2.12,-7.2,42.19),[{from:1,to:30,name:"swim"}]);o.push(d.promise),Promise.all(o).then((function(){console.log("all loaded")})),this.assetsManager.load(),t.$route.query.debug&&(this.debugState=!0,this.camera.speed=.5,this.debugUtils(),l.Engine.audioEngine.setGlobalVolume(0));var f=new Date,m=!1,v=0;this.engine.runRenderLoop((function(){var e=(new Date-f)/1e3,r=n.engine.getDeltaTime()/1e3;n.camera.position.y>.6&&(n.camera.position.y=.6);var o=n.camera.position.y<=0;if(m!==o&&(m=o),v++%8&&(t.depth=m?(-n.camera.position.y).toFixed(1):0,t.time=e,t.ascentSpeed=(n.camera.position.y-n.lastDepth)/r,t.orientationDegrees=180*n.camera.rotation.y/Math.PI,t.fps=n.engine.getFps().toFixed()),n.lastDepth=n.camera.position.y,t.$route.query.debug){var c=document.getElementById("inspector-host");c&&(c.style.position="absolute")}d.update(r),n.scene.render(),t.snapshotRequested&&(t.snapshotRequested=!1)})),window.addEventListener("resize",(function(){return n.resize()}))}var t;return Object(d.a)(e,[{key:"share",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("underwater-3d").toDataURL(),n=function(){var a=document.createElement("a"),e=(new Date).toJSON().slice(0,19).replaceAll(":","-");a.setAttribute("download","LajeDeSantos-"+e+".png"),a.setAttribute("href",t.replace("image/png","application/octet-stream")),a.click()},!navigator.canShare){e.next=20;break}return e.next=5,fetch(t);case 5:return e.next=7,e.sent.blob();case 7:return r=e.sent,o=new File([r],"lajedesantos.png",{type:r.type}),c={title:"Laje de Santos",url:"https://lajedesantos.net",files:[o]},e.prev=10,e.next=13,navigator.share(c);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),n();case 18:e.next=21;break;case 20:n();case 21:case"end":return e.stop()}}),e,null,[[10,15]])}))),function(){return t.apply(this,arguments)})},{key:"beforeDestroy",value:function(){document.onfullscreenchange=null,this.engine.stopRenderLoop(),this.audioDiver&&(this.audioDiver.pause(),this.audioDiver=null),this.audioOcean&&(this.audioOcean.pause(),this.audioOcean=null),this.scene.dispose(),this.scene=null,this.engine=null}},{key:"bootScene",value:function(e,t){var n=this;function r(){this.loadingUIText="Mergulho na Laje de Santos"}t.isTouch="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,r.prototype.displayLoadingUI=function(){alert(this.loadingUIText)},r.prototype.hideLoadingUI=function(){alert("Loaded!")},this.engine=new l.Engine(e,!0),this.engine.loadingUIText="Mergulho na Laje de Santos",this.scene=new l.Scene(this.engine),this.scene.clearColor=new l.Color4(0,.5,.85,0);var o=new l.Vector3(-15.51978616737642,-10,29.13296827068854);this.camera=new l.UniversalCamera("Camera",o,this.scene),this.camera.applyGravity=!1,this.camera.speed=.05,this.camera.ellipsoid=new l.Vector3(.5,1,.5),this.camera.keysUp.push("w".charCodeAt(0)),this.camera.keysUp.push("W".charCodeAt(0)),this.scene.onKeyboardObservable.add((function(e){switch(l.Engine.audioEngine.audioContext&&l.Engine.audioEngine.audioContext.resume(),e.type){case l.KeyboardEventTypes.KEYDOWN:console.log("KEY DOWN: ",e.event.key);break;case l.KeyboardEventTypes.KEYUP:console.log("KEY UP: ",e.event.keyCode)}})),this.camera.minZ=.1,this.camera.maxZ=700,this.camera.setTarget(new l.Vector3(-12.89001753167552,1.708562384403646,25.710433418293825)),this.camera.attachControl(e,!0),this.scene.collisionsEnabled=!0,this.camera.checkCollisions=!0,this.scene.autoClear=!1,this.scene.autoClearDepthAndStencil=!1,this.assetsManager=new l.AssetsManager(this.scene),this.assetsManager.onTaskErrorObservable.add((function(e){console.error("task failed",e.name,e.errorObject.message,e.errorObject.exception)})),this.assetsManager.onTaskSuccessObservable.add((function(e){console.log("task successful",e.name)})),this.assetsManager.onProgress=function(e,t,r){n.engine.loadingUIText="We are loading the scene. "+e+" out of "+t+" items still need to be loaded."}}},{key:"debugUtils",value:function(){this.scene.debugLayer.show()}},{key:"resize",value:function(){this.engine&&this.engine.resize(),this.rebuildOceanTexture=!0}},{key:"lights",value:function(){var e=new l.HemisphericLight("light1",new l.Vector3(0,1,0),this.scene);e.diffuse=l.Color3.FromHexString("#CCCCCC"),e.intensity=.4,this.sunLight=new l.DirectionalLight("DirectionalLight",new l.Vector3(-.5,-1,.6).normalize(),this.scene),this.sunLight.diffuse=l.Color3.FromHexString("#FFFFFF"),this.sunLight.intensity=.8}},{key:"addToSceneAndCaustic",value:function(e){}},{key:"loadBoidsModel",value:function(e,t,n,r,o,c){var d=this,h=new f.a(n,r.add(o.subtract(r).scale(.5)),1,30);h.boundsMin=r,h.boundsMax=o,h.calculateBounds(),h.reset(30,1),h.cohesion=.001,h.alignment=.03,h.separationMinDistance=.5,h.maxSpeed=1;for(var v=null,w=new Float32Array(16*n),y=l.Matrix.Identity(),i=0;i<n;i++)y.copyToArray(w,16*i);new Float32Array(4*n);var p=l.SceneLoader.ImportMeshAsync("",e,t,this.scene,void 0).then((function(e){var t,n=e.meshes,r=m(n);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.material&&o.material.freeze(),o.freezeWorldMatrix()}}catch(e){r.e(e)}finally{r.f()}var c=n[0];v=n[1],c.scaling.z=1,c.scaling.y=1,c.scaling.x=1,c.rotationQuaternion.y=0,v.parent.rotationQuaternion.x=1,v.parent.rotationQuaternion.y=0,v.parent.rotationQuaternion.z=0,v.parent.rotationQuaternion.w=0,v.parent.rotationQuaternion.normalize(),v.computeWorldMatrix(),v.thinInstanceSetBuffer("matrix",w,16),d.addToSceneAndCaustic(n)})).catch((function(e){console.error(e)}));return{models:[v],boidsManager:h,promise:p,update:function(e,t,n){var r=new l.Vector3(1,1,1),o=new l.Vector3(1,1,1),c=new l.Vector3(0,-1,0),d=l.Matrix.Identity(),h=l.Quaternion.Zero(),f=new l.Vector3(1,1,1),m=new l.Vector3(1,1,1);return function(t){if(v){e.update(t);for(var y=0;y<n;y++){var x=e.boids[y];x.velocity.normalizeToRef(o),l.Vector3.CrossToRef(o,c,m),l.Vector3.CrossToRef(m,o,f),l.Quaternion.RotationQuaternionFromAxisToRef(m,o,f,h),l.Matrix.ComposeToRef(r,h,x.position,d),d.copyToArray(w,16*y)}v.thinInstanceSetBuffer("matrix",w,16)}}}(h,0,n)}}},{key:"random",value:function(e,t){return Math.random()*(t-e)+e}},{key:"clamp",value:function(e,t,n){return Math.min(Math.max(e,t),n)}}]),e}(),y={props:{},data:function(){return{isFullscreen:!1,isTouch:!1,started:!1,snapshotRequested:!1,ascentSpeed:0,depth:0,time:0,air:100,fps:0,volume:0,mute:!1,orientationDegrees:0}},computed:{base:function(){return this.$router.options.base},ascentSpeedColor:function(){return this.ascentSpeed<1/60?"#000":this.ascentSpeed<.1||this.ascentSpeed<.2?"#0f0":this.ascentSpeed<.3?"#ff0":"#f00"},ascentSpeedGraph:function(){return 0===this.depth?"":this.ascentSpeed<1/60||this.ascentSpeed<.1?"<":this.ascentSpeed<.2?"<<":this.ascentSpeed<.3?"<<<":"<<<<"},playing:function(){return!!this.underwater&&(!!this.underwater.animTour&&!this.underwater.animTour._paused)}},mounted:function(){this.underwater=new w(this)},beforeDestroy:function(){this.underwater&&this.underwater.beforeDestroy(),this.underwater=null},methods:{fullscreen:function(){document.getElementById("underwater").requestFullscreen()},start:function(){this.started=!0,this.fullscreen()},toggleVolume:function(){this.mute=!this.mute,this.mute?(this.volume=l.Engine.audioEngine.getGlobalVolume(),l.Engine.audioEngine.setGlobalVolume(0)):l.Engine.audioEngine.setGlobalVolume(this.volume)},toggleGuidedTour:function(){this.playing=!this.playing,this.underwater.animTour||(this.playing=!0),this.playing?(console.log("Guided Tour Requested"),this.underwater.animTour?this.underwater.pauseTour():this.underwater.guidedTour()):(console.log("Guided Tour Paused"),this.underwater.pauseTour())},stopGuidedTour:function(){this.playing=!1,this.underwater.quitTour()}}},x=(n(332),n(4)),component=Object(x.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"underwater"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.toggleGuidedTour.apply(null,arguments)}}},[n("canvas",{attrs:{id:"underwater-3d","touch-action":"none"}}),e._v(" "),n("div",{attrs:{id:"underwater-debug"}},[e._v("\n    "+e._s(e.fps)+" fps\n  ")]),e._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:!e.isFullscreen&&e.started,expression:"!isFullscreen && started"}],staticClass:"button-giant",attrs:{id:"underwater-fullscreen"},on:{click:e.fullscreen}},[n("i18n",[e._v("Ficar em tela cheia")])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.started,expression:"!started"}],attrs:{id:"underwater-instructions"}},[e.isTouch?n("p",[n("i18n",[e._v("\n        Use os joysticks azul e vermelho para girar e nadar.\n      ")])],1):n("p",[n("i18n",[e._v("\n        Torne-se um mergulhador e explore a Laje de Santos.\n      ")]),e._v(" "),n("br"),e._v(" "),n("i18n",[e._v("\n        Clique Com o Botão Esquerdo do Mouse e Arraste para Olhar ao Redor.\n      ")]),e._v(" "),n("br"),e._v(" "),n("i18n",[e._v("\n        Aperte 'W' para nadar.\n      ")])],1),e._v(" "),n("button",{staticClass:"button-giant",attrs:{id:"underwater-start"},on:{click:e.start}},[n("i18n",[e._v("Iniciar")])],1)]),e._v(" "),n("div",{attrs:{id:"underwater-hud"}},[n("div",{attrs:{id:"underwater-hud-depth"}},[n("span",{attrs:{id:"underwater-hud-depth-name"}},[n("i18n",[e._v("Profundidade")])],1),n("br"),e._v(" "),n("span",{style:{color:e.ascentSpeedColor},attrs:{id:"underwater-hud-depth-ascent"}},[e._v(e._s(e.ascentSpeedGraph))]),e._v(" "),n("span",{attrs:{id:"underwater-hud-depth-value"}},[e._v(e._s(e.depth))]),e._v(" "),n("span",{attrs:{id:"underwater-hud-depth-unit"}},[e._v("m")])]),e._v(" "),n("div",{attrs:{id:"underwater-hud-time"}},[n("span",{attrs:{id:"underwater-hud-time-name"}},[n("i18n",[e._v("Tempo")])],1),n("br"),e._v(" "),n("span",{attrs:{id:"underwater-hud-time-value"}},[e._v(e._s(parseInt(e.time/60,10))+":"+e._s(parseInt(e.time%60,10).toString().padStart(2,"0")))])]),e._v(" "),n("div",{attrs:{id:"underwater-hud-compass"}},[n("span",{attrs:{id:"underwater-hud-compass-name"}},[n("i18n",[e._v("Compasso")])],1),n("br"),e._v(" "),n("span",{attrs:{id:"underwater-hud-compass-value"}},[e._v(e._s((parseInt(e.orientationDegrees)%360+360)%360))])])]),e._v(" "),n("div",{attrs:{id:"underwater-settings"}},[n("font-awesome-icon",{attrs:{icon:["fas","camera"],size:"2x"},on:{click:function(t){e.snapshotRequested=!0}}}),e._v(" "),n("font-awesome-layers",{staticClass:"fa-2x",on:{click:e.toggleVolume}},[n("font-awesome-icon",{attrs:{icon:["fas","volume-up"],transform:"shrink-6"}}),e._v(" "),n("font-awesome-icon",{directives:[{name:"show",rawName:"v-show",value:e.mute,expression:"mute"}],staticStyle:{color:"Tomato"},attrs:{icon:"ban"}})],1),e._v(" "),n("font-awesome-layers",{staticClass:"fa-2x",on:{click:e.toggleGuidedTour}},[n("font-awesome-icon",{directives:[{name:"show",rawName:"v-show",value:!e.playing,expression:"!playing"}],attrs:{icon:["fas","play"],transform:"shrink-6"}}),e._v(" "),n("font-awesome-icon",{directives:[{name:"show",rawName:"v-show",value:e.playing,expression:"playing"}],attrs:{icon:["fas","pause"],transform:"shrink-6"}})],1)],1)])}),[],!1,null,"e457f282",null),_={components:{UnderwaterBug:component.exports},extends:r.default,data:function(){return{}},mounted:function(){this.head.title=this.$gettext("Mergulho virtual"),this.head.description=this.$gettext("Mergulho em realidade virtual na Laje de Santos")}},M=Object(x.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",[n("section",[n("h1",[n("i18n",[e._v("Mergulho virtual")])],1),e._v(" "),n("underwater-bug")],1)])}),[],!1,null,null,null);t.default=M.exports}}]);