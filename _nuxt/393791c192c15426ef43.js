(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{217:function(e,t,r){(function(r){var n,o,l;"undefined"!=typeof window&&window,o=[],void 0===(l="function"==typeof(n=function(){var e=function(t,r){"use strict";var n=Object.create(e.prototype),o=0,l=0,c=0,d=0,m=[],h=!0,f=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},v=null,M=!1;try{var y=Object.defineProperty({},"passive",{get:function(){M=!0}});window.addEventListener("testPassive",null,y),window.removeEventListener("testPassive",null,y)}catch(e){}var T=window.cancelAnimationFrame||window.mozCancelAnimationFrame||clearTimeout,w=window.transformProp||function(){var e=document.createElement("div");if(null===e.style.transform){var t=["Webkit","Moz","ms"];for(var r in t)if(void 0!==e.style[t[r]+"Transform"])return t[r]+"Transform"}return"transform"}();n.options={speed:-2,verticalSpeed:null,horizontalSpeed:null,breakpoints:[576,768,1201],center:!1,wrapper:null,relativeToWrapper:!1,round:!0,vertical:!0,horizontal:!1,verticalScrollAxis:"y",horizontalScrollAxis:"x",callback:function(){}},r&&Object.keys(r).forEach((function(e){n.options[e]=r[e]})),r&&r.breakpoints&&function(){if(3===n.options.breakpoints.length&&Array.isArray(n.options.breakpoints)){var e,t=!0,r=!0;if(n.options.breakpoints.forEach((function(i){"number"!=typeof i&&(r=!1),null!==e&&i<e&&(t=!1),e=i})),t&&r)return}n.options.breakpoints=[576,768,1201],console.warn("Rellax: You must pass an array of 3 numbers in ascending order to the breakpoints option. Defaults reverted")}(),t||(t=".rellax");var S="string"==typeof t?document.querySelectorAll(t):[t];if(S.length>0){if(n.elems=S,n.options.wrapper&&!n.options.wrapper.nodeType){var x=document.querySelector(n.options.wrapper);if(!x)return void console.warn("Rellax: The wrapper you're trying to use doesn't exist.");n.options.wrapper=x}var L,R=function(){for(var i=0;i<m.length;i++)n.elems[i].style.cssText=m[i].style;var e,t;m=[],l=window.innerHeight,d=window.innerWidth,e=d,t=n.options.breakpoints,L=e<t[0]?"xs":e>=t[0]&&e<t[1]?"sm":e>=t[1]&&e<t[2]?"md":"lg",E(),function(){for(var i=0;i<n.elems.length;i++){var e=A(n.elems[i]);m.push(e)}}(),animate(),h&&(window.addEventListener("resize",R),h=!1,P())},A=function(e){var t,r=e.getAttribute("data-rellax-percentage"),o=e.getAttribute("data-rellax-speed"),c=e.getAttribute("data-rellax-xs-speed"),m=e.getAttribute("data-rellax-mobile-speed"),h=e.getAttribute("data-rellax-tablet-speed"),f=e.getAttribute("data-rellax-desktop-speed"),v=e.getAttribute("data-rellax-vertical-speed"),M=e.getAttribute("data-rellax-horizontal-speed"),y=e.getAttribute("data-rellax-vertical-scroll-axis"),T=e.getAttribute("data-rellax-horizontal-scroll-axis"),w=e.getAttribute("data-rellax-zindex")||0,S=e.getAttribute("data-rellax-min"),x=e.getAttribute("data-rellax-max"),R=e.getAttribute("data-rellax-min-x"),A=e.getAttribute("data-rellax-max-x"),E=e.getAttribute("data-rellax-min-y"),I=e.getAttribute("data-rellax-max-y"),P=!0;c||m||h||f?t={xs:c,sm:m,md:h,lg:f}:P=!1;var O=n.options.wrapper?n.options.wrapper.scrollTop:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;n.options.relativeToWrapper&&(O=(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)-n.options.wrapper.offsetTop);var U=n.options.vertical&&(r||n.options.center)?O:0,F=n.options.horizontal&&(r||n.options.center)?n.options.wrapper?n.options.wrapper.scrollLeft:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft:0,C=U+e.getBoundingClientRect().top,N=e.clientHeight||e.offsetHeight||e.scrollHeight,H=F+e.getBoundingClientRect().left,G=e.clientWidth||e.offsetWidth||e.scrollWidth,D=r||(U-C+l)/(N+l),k=r||(F-H+d)/(G+d);n.options.center&&(k=.5,D=.5);var B=P&&null!==t[L]?Number(t[L]):o||n.options.speed,K=v||n.options.verticalSpeed,j=M||n.options.horizontalSpeed,z=y||n.options.verticalScrollAxis,V=T||n.options.horizontalScrollAxis,X=_(k,D,B,K,j),style=e.style.cssText,Y="",W=/transform\s*:/i.exec(style);if(W){var J=W.index,Q=style.slice(J),Z=Q.indexOf(";");Y=Z?" "+Q.slice(11,Z).replace(/\s/g,""):" "+Q.slice(11).replace(/\s/g,"")}return{baseX:X.x,baseY:X.y,top:C,left:H,height:N,width:G,speed:B,verticalSpeed:K,horizontalSpeed:j,verticalScrollAxis:z,horizontalScrollAxis:V,style:style,transform:Y,zindex:w,min:S,max:x,minX:R,maxX:A,minY:E,maxY:I}},E=function(){var e=o,t=c;if(o=n.options.wrapper?n.options.wrapper.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop||window.pageYOffset,c=n.options.wrapper?n.options.wrapper.scrollLeft:(document.documentElement||document.body.parentNode||document.body).scrollLeft||window.pageXOffset,n.options.relativeToWrapper){var r=(document.documentElement||document.body.parentNode||document.body).scrollTop||window.pageYOffset;o=r-n.options.wrapper.offsetTop}return!(e==o||!n.options.vertical)||!(t==c||!n.options.horizontal)},_=function(e,t,r,o,l){var c={},d=(l||r)*(100*(1-e)),m=(o||r)*(100*(1-t));return c.x=n.options.round?Math.round(d):Math.round(100*d)/100,c.y=n.options.round?Math.round(m):Math.round(100*m)/100,c},I=function(){window.removeEventListener("resize",I),window.removeEventListener("orientationchange",I),(n.options.wrapper?n.options.wrapper:window).removeEventListener("scroll",I),(n.options.wrapper?n.options.wrapper:document).removeEventListener("touchmove",I),v=f(P)},P=function(){E()&&!1===h?(animate(),v=f(P)):(v=null,window.addEventListener("resize",I),window.addEventListener("orientationchange",I),(n.options.wrapper?n.options.wrapper:window).addEventListener("scroll",I,!!M&&{passive:!0}),(n.options.wrapper?n.options.wrapper:document).addEventListener("touchmove",I,!!M&&{passive:!0}))},animate=function(){for(var e,i=0;i<n.elems.length;i++){var t=m[i].verticalScrollAxis.toLowerCase(),r=m[i].horizontalScrollAxis.toLowerCase(),h=-1!=t.indexOf("x")?o:0,f=-1!=t.indexOf("y")?o:0,v=-1!=r.indexOf("x")?c:0,M=(f+(-1!=r.indexOf("y")?c:0)-m[i].top+l)/(m[i].height+l),y=(h+v-m[i].left+d)/(m[i].width+d),T=(e=_(y,M,m[i].speed,m[i].verticalSpeed,m[i].horizontalSpeed)).y-m[i].baseY,S=e.x-m[i].baseX;null!==m[i].min&&(n.options.vertical&&!n.options.horizontal&&(T=T<=m[i].min?m[i].min:T),n.options.horizontal&&!n.options.vertical&&(S=S<=m[i].min?m[i].min:S)),null!=m[i].minY&&(T=T<=m[i].minY?m[i].minY:T),null!=m[i].minX&&(S=S<=m[i].minX?m[i].minX:S),null!==m[i].max&&(n.options.vertical&&!n.options.horizontal&&(T=T>=m[i].max?m[i].max:T),n.options.horizontal&&!n.options.vertical&&(S=S>=m[i].max?m[i].max:S)),null!=m[i].maxY&&(T=T>=m[i].maxY?m[i].maxY:T),null!=m[i].maxX&&(S=S>=m[i].maxX?m[i].maxX:S);var x=m[i].zindex,L="translate3d("+(n.options.horizontal?S:"0")+"px,"+(n.options.vertical?T:"0")+"px,"+x+"px) "+m[i].transform;n.elems[i].style[w]=L}n.options.callback(e)};return n.destroy=function(){for(var i=0;i<n.elems.length;i++)n.elems[i].style.cssText=m[i].style;h||(window.removeEventListener("resize",R),h=!0),T(v),v=null},R(),n.refresh=R,n}console.warn("Rellax: The elements you're trying to select don't exist.")};return e})?n.apply(t,o):n)||(e.exports=l)}).call(this,r(18))},218:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(173),o=function(){function e(e){n.Loader.call(this,e),this.dracoLoader=null,this.ddsLoader=null}function t(){var e={};return{get:function(t){return e[t]},add:function(t,object){e[t]=object},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype=Object.assign(Object.create(n.Loader.prototype),{constructor:e,load:function(e,t,r,o){var l,c=this;l=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:n.LoaderUtils.extractUrlBase(e),c.manager.itemStart(e);var d=function(t){o?o(t):console.error(t),c.manager.itemError(e),c.manager.itemEnd(e)},m=new n.FileLoader(c.manager);m.setPath(this.path),m.setResponseType("arraybuffer"),"use-credentials"===c.crossOrigin&&m.setWithCredentials(!0),m.load(e,(function(data){try{c.parse(data,l,(function(r){t(r),c.manager.itemEnd(e)}),d)}catch(e){d(e)}}),r,d)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},parse:function(data,path,e,t){var content,m={};if("string"==typeof data)content=data;else if(n.LoaderUtils.decodeText(new Uint8Array(data,0,4))===d){try{m[r.KHR_BINARY_GLTF]=new f(data)}catch(e){return void(t&&t(e))}content=m[r.KHR_BINARY_GLTF].content}else content=n.LoaderUtils.decodeText(new Uint8Array(data));var h=JSON.parse(content);if(void 0===h.asset||h.asset.version[0]<2)t&&t(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(h.extensionsUsed)for(var i=0;i<h.extensionsUsed.length;++i){var w=h.extensionsUsed[i],S=h.extensionsRequired||[];switch(w){case r.KHR_LIGHTS_PUNCTUAL:m[w]=new l(h);break;case r.KHR_MATERIALS_UNLIT:m[w]=new c;break;case r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:m[w]=new y;break;case r.KHR_DRACO_MESH_COMPRESSION:m[w]=new v(h,this.dracoLoader);break;case r.MSFT_TEXTURE_DDS:m[w]=new o(this.ddsLoader);break;case r.KHR_TEXTURE_TRANSFORM:m[w]=new M;break;case r.KHR_MESH_QUANTIZATION:m[w]=new T;break;default:S.indexOf(w)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+w+'".')}}new Y(h,m,{path:path||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(e,t)}}});var r={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function o(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=r.MSFT_TEXTURE_DDS,this.ddsLoader=e}function l(e){this.name=r.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[r.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function c(){this.name=r.KHR_MATERIALS_UNLIT}l.prototype.loadLight=function(e){var t,r=this.lightDefs[e],o=new n.Color(16777215);void 0!==r.color&&o.fromArray(r.color);var l=void 0!==r.range?r.range:0;switch(r.type){case"directional":(t=new n.DirectionalLight(o)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new n.PointLight(o)).distance=l;break;case"spot":(t=new n.SpotLight(o)).distance=l,r.spot=r.spot||{},r.spot.innerConeAngle=void 0!==r.spot.innerConeAngle?r.spot.innerConeAngle:0,r.spot.outerConeAngle=void 0!==r.spot.outerConeAngle?r.spot.outerConeAngle:Math.PI/4,t.angle=r.spot.outerConeAngle,t.penumbra=1-r.spot.innerConeAngle/r.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+r.type+'".')}return t.position.set(0,0,0),t.decay=2,void 0!==r.intensity&&(t.intensity=r.intensity),t.name=r.name||"light_"+e,Promise.resolve(t)},c.prototype.getMaterialType=function(){return n.MeshBasicMaterial},c.prototype.extendParams=function(e,t,r){var o=[];e.color=new n.Color(1,1,1),e.opacity=1;var l=t.pbrMetallicRoughness;if(l){if(Array.isArray(l.baseColorFactor)){var c=l.baseColorFactor;e.color.fromArray(c),e.opacity=c[3]}void 0!==l.baseColorTexture&&o.push(r.assignTexture(e,"map",l.baseColorTexture))}return Promise.all(o)};var d="glTF",m=1313821514,h=5130562;function f(data){this.name=r.KHR_BINARY_GLTF,this.content=null,this.body=null;var e=new DataView(data,0,12);if(this.header={magic:n.LoaderUtils.decodeText(new Uint8Array(data.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==d)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var t=new DataView(data,12),o=0;o<t.byteLength;){var l=t.getUint32(o,!0);o+=4;var c=t.getUint32(o,!0);if(o+=4,c===m){var f=new Uint8Array(data,12+o,l);this.content=n.LoaderUtils.decodeText(f)}else if(c===h){var v=12+o;this.body=data.slice(v,v+l)}o+=l}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function v(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=r.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t}function M(){this.name=r.KHR_TEXTURE_TRANSFORM}function y(){return{name:r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return n.ShaderMaterial},extendParams:function(e,t,r){var o=t.extensions[this.name],l=n.ShaderLib.standard,c=n.UniformsUtils.clone(l.uniforms),d=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),m=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),h=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),f=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),v=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),M=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",d).replace("#include <metalnessmap_pars_fragment>",m).replace("#include <roughnessmap_fragment>",h).replace("#include <metalnessmap_fragment>",f).replace("#include <lights_physical_fragment>",v);delete c.roughness,delete c.metalness,delete c.roughnessMap,delete c.metalnessMap,c.specular={value:(new n.Color).setHex(1118481)},c.glossiness={value:.5},c.specularMap={value:null},c.glossinessMap={value:null},e.vertexShader=l.vertexShader,e.fragmentShader=M,e.uniforms=c,e.defines={STANDARD:""},e.color=new n.Color(1,1,1),e.opacity=1;var y=[];if(Array.isArray(o.diffuseFactor)){var T=o.diffuseFactor;e.color.fromArray(T),e.opacity=T[3]}if(void 0!==o.diffuseTexture&&y.push(r.assignTexture(e,"map",o.diffuseTexture)),e.emissive=new n.Color(0,0,0),e.glossiness=void 0!==o.glossinessFactor?o.glossinessFactor:1,e.specular=new n.Color(1,1,1),Array.isArray(o.specularFactor)&&e.specular.fromArray(o.specularFactor),void 0!==o.specularGlossinessTexture){var w=o.specularGlossinessTexture;y.push(r.assignTexture(e,"glossinessMap",w)),y.push(r.assignTexture(e,"specularMap",w))}return Promise.all(y)},createMaterial:function(e){var t=new n.ShaderMaterial({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(source){var e=source.clone();e.isGLTFSpecularGlossinessMaterial=!0;for(var t=this.specularGlossinessParams,i=0,r=t.length;i<r;i++){var n=source[t[i]];e[t[i]]=n&&n.isColor?n.clone():n}return e},refreshUniforms:function(e,t,r,n,o){if(!0===o.isGLTFSpecularGlossinessMaterial){var l,c=o.uniforms,d=o.defines;c.opacity.value=o.opacity,c.diffuse.value.copy(o.color),c.emissive.value.copy(o.emissive).multiplyScalar(o.emissiveIntensity),c.map.value=o.map,c.specularMap.value=o.specularMap,c.alphaMap.value=o.alphaMap,c.lightMap.value=o.lightMap,c.lightMapIntensity.value=o.lightMapIntensity,c.aoMap.value=o.aoMap,c.aoMapIntensity.value=o.aoMapIntensity,o.map?l=o.map:o.specularMap?l=o.specularMap:o.displacementMap?l=o.displacementMap:o.normalMap?l=o.normalMap:o.bumpMap?l=o.bumpMap:o.glossinessMap?l=o.glossinessMap:o.alphaMap?l=o.alphaMap:o.emissiveMap&&(l=o.emissiveMap),void 0!==l&&(l.isWebGLRenderTarget&&(l=l.texture),!0===l.matrixAutoUpdate&&l.updateMatrix(),c.uvTransform.value.copy(l.matrix)),o.envMap&&(c.envMap.value=o.envMap,c.envMapIntensity.value=o.envMapIntensity,c.flipEnvMap.value=o.envMap.isCubeTexture?-1:1,c.reflectivity.value=o.reflectivity,c.refractionRatio.value=o.refractionRatio,c.maxMipLevel.value=e.properties.get(o.envMap).__maxMipLevel),c.specular.value.copy(o.specular),c.glossiness.value=o.glossiness,c.glossinessMap.value=o.glossinessMap,c.emissiveMap.value=o.emissiveMap,c.bumpMap.value=o.bumpMap,c.normalMap.value=o.normalMap,c.displacementMap.value=o.displacementMap,c.displacementScale.value=o.displacementScale,c.displacementBias.value=o.displacementBias,null!==c.glossinessMap.value&&void 0===d.USE_GLOSSINESSMAP&&(d.USE_GLOSSINESSMAP="",d.USE_ROUGHNESSMAP=""),null===c.glossinessMap.value&&void 0!==d.USE_GLOSSINESSMAP&&(delete d.USE_GLOSSINESSMAP,delete d.USE_ROUGHNESSMAP)}}}}function T(){this.name=r.KHR_MESH_QUANTIZATION}function w(e,t,r,o){n.Interpolant.call(this,e,t,r,o)}v.prototype.decodePrimitive=function(e,t){var r=this.json,n=this.dracoLoader,o=e.extensions[this.name].bufferView,l=e.extensions[this.name].attributes,c={},d={},m={};for(var h in l){var f=C[h]||h.toLowerCase();c[f]=l[h]}for(h in e.attributes){f=C[h]||h.toLowerCase();if(void 0!==l[h]){var v=r.accessors[e.attributes[h]],M=P[v.componentType];m[f]=M,d[f]=!0===v.normalized}}return t.getDependency("bufferView",o).then((function(e){return new Promise((function(t){n.decodeDracoFile(e,(function(e){for(var r in e.attributes){var n=e.attributes[r],o=d[r];void 0!==o&&(n.normalized=o)}t(e)}),c,m)}))}))},M.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},w.prototype=Object.create(n.Interpolant.prototype),w.prototype.constructor=w,w.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,o=e*n*3+n,i=0;i!==n;i++)t[i]=r[o+i];return t},w.prototype.beforeStart_=w.prototype.copySampleValue_,w.prototype.afterEnd_=w.prototype.copySampleValue_,w.prototype.interpolate_=function(e,t,r,n){for(var o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,d=2*c,m=3*c,td=n-t,p=(r-t)/td,h=p*p,f=h*p,v=e*m,M=v-m,y=-2*f+3*h,T=f-h,w=1-y,S=T-h+p,i=0;i!==c;i++){var x=l[M+i+c],L=l[M+i+d]*td,R=l[v+i+c],A=l[v+i]*td;o[i]=w*x+S*L+y*R+T*A}return o};var S,x=0,L=1,R=2,A=3,E=4,_=5,I=6,P={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},O={9728:n.NearestFilter,9729:n.LinearFilter,9984:n.NearestMipmapNearestFilter,9985:n.LinearMipmapNearestFilter,9986:n.NearestMipmapLinearFilter,9987:n.LinearMipmapLinearFilter},U={33071:n.ClampToEdgeWrapping,33648:n.MirroredRepeatWrapping,10497:n.RepeatWrapping},F={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},C={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},N={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},H={CUBICSPLINE:void 0,LINEAR:n.InterpolateLinear,STEP:n.InterpolateDiscrete},G="OPAQUE",D="MASK",k="BLEND",B={"image/png":n.RGBAFormat,"image/jpeg":n.RGBFormat};function K(e,path){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(path)&&/^\//.test(e)&&(path=path.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:path+e)}function j(e,object,t){for(var r in t.extensions)void 0===e[r]&&(object.userData.gltfExtensions=object.userData.gltfExtensions||{},object.userData.gltfExtensions[r]=t.extensions[r])}function z(object,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(object.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function V(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var i=0,r=t.weights.length;i<r;i++)e.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){var n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(i=0,r=n.length;i<r;i++)e.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function X(e){for(var t="",r=Object.keys(e).sort(),i=0,n=r.length;i<n;i++)t+=r[i]+":"+e[r[i]]+";";return t}function Y(e,r,o){this.json=e||{},this.extensions=r||{},this.options=o||{},this.cache=new t,this.primitiveCache={},this.textureLoader=new n.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new n.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function W(e,t,r){var o=t.attributes,l=[];function c(t,n){return r.getDependency("accessor",t).then((function(t){e.setAttribute(n,t)}))}for(var d in o){var m=C[d]||d.toLowerCase();m in e.attributes||l.push(c(o[d],m))}if(void 0!==t.indices&&!e.index){var h=r.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));l.push(h)}return z(e,t),function(e,t,r){var o=t.attributes,l=new n.Box3;if(void 0!==o.POSITION){var c=(M=r.json.accessors[o.POSITION]).min,d=M.max;l.set(new n.Vector3(c[0],c[1],c[2]),new n.Vector3(d[0],d[1],d[2]));var m=t.targets;if(void 0!==m)for(var h=new n.Vector3,i=0,f=m.length;i<f;i++){var v=m[i];if(void 0!==v.POSITION){var M;c=(M=r.json.accessors[v.POSITION]).min,d=M.max;h.setX(Math.max(Math.abs(c[0]),Math.abs(d[0]))),h.setY(Math.max(Math.abs(c[1]),Math.abs(d[1]))),h.setZ(Math.max(Math.abs(c[2]),Math.abs(d[2]))),l.expandByVector(h)}}e.boundingBox=l;var y=new n.Sphere;l.getCenter(y.center),y.radius=l.min.distanceTo(l.max)/2,e.boundingSphere=y}}(e,t,r),Promise.all(l).then((function(){return void 0!==t.targets?function(e,t,r){for(var n=!1,o=!1,i=0,l=t.length;i<l;i++){if(void 0!==(m=t[i]).POSITION&&(n=!0),void 0!==m.NORMAL&&(o=!0),n&&o)break}if(!n&&!o)return Promise.resolve(e);var c=[],d=[];for(i=0,l=t.length;i<l;i++){var m=t[i];if(n){var h=void 0!==m.POSITION?r.getDependency("accessor",m.POSITION):e.attributes.position;c.push(h)}if(o){h=void 0!==m.NORMAL?r.getDependency("accessor",m.NORMAL):e.attributes.normal;d.push(h)}}return Promise.all([Promise.all(c),Promise.all(d)]).then((function(t){var r=t[0],l=t[1];return n&&(e.morphAttributes.position=r),o&&(e.morphAttributes.normal=l),e.morphTargetsRelative=!0,e}))}(e,t.targets,r):e}))}return Y.prototype.parse=function(e,t){var r=this,n=this.json,o=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(t){var l={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:r,userData:{}};j(o,l,n),z(l,n),e(l)})).catch(t)},Y.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[],n={},o={},l=0,c=t.length;l<c;l++)for(var d=t[l].joints,i=0,m=d.length;i<m;i++)e[d[i]].isBone=!0;for(var h=0,f=e.length;h<f;h++){var v=e[h];void 0!==v.mesh&&(void 0===n[v.mesh]&&(n[v.mesh]=o[v.mesh]=0),n[v.mesh]++,void 0!==v.skin&&(r[v.mesh].isSkinnedMesh=!0))}this.json.meshReferences=n,this.json.meshUses=o},Y.prototype.getDependency=function(e,t){var n=e+":"+t,o=this.cache.get(n);if(!o){switch(e){case"scene":o=this.loadScene(t);break;case"node":o=this.loadNode(t);break;case"mesh":o=this.loadMesh(t);break;case"accessor":o=this.loadAccessor(t);break;case"bufferView":o=this.loadBufferView(t);break;case"buffer":o=this.loadBuffer(t);break;case"material":o=this.loadMaterial(t);break;case"texture":o=this.loadTexture(t);break;case"skin":o=this.loadSkin(t);break;case"animation":o=this.loadAnimation(t);break;case"camera":o=this.loadCamera(t);break;case"light":o=this.extensions[r.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,o)}return o},Y.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var r=this,defs=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(defs.map((function(t,n){return r.getDependency(e,n)}))),this.cache.add(e,t)}return t},Y.prototype.loadBuffer=function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[r.KHR_BINARY_GLTF].body);var o=this.options;return new Promise((function(e,r){n.load(K(t.uri,o.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},Y.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var r=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+r)}))},Y.prototype.loadAccessor=function(e){var t=this,r=this.json,o=this.json.accessors[e];if(void 0===o.bufferView&&void 0===o.sparse)return Promise.resolve(null);var l=[];return void 0!==o.bufferView?l.push(this.getDependency("bufferView",o.bufferView)):l.push(null),void 0!==o.sparse&&(l.push(this.getDependency("bufferView",o.sparse.indices.bufferView)),l.push(this.getDependency("bufferView",o.sparse.values.bufferView))),Promise.all(l).then((function(e){var l,c,d=e[0],m=F[o.type],h=P[o.componentType],f=h.BYTES_PER_ELEMENT,v=f*m,M=o.byteOffset||0,y=void 0!==o.bufferView?r.bufferViews[o.bufferView].byteStride:void 0,T=!0===o.normalized;if(y&&y!==v){var w=Math.floor(M/y),S="InterleavedBuffer:"+o.bufferView+":"+o.componentType+":"+w+":"+o.count,x=t.cache.get(S);x||(l=new h(d,w*y,o.count*y/f),x=new n.InterleavedBuffer(l,y/f),t.cache.add(S,x)),c=new n.InterleavedBufferAttribute(x,m,M%y/f,T)}else l=null===d?new h(o.count*m):new h(d,M,o.count*m),c=new n.BufferAttribute(l,m,T);if(void 0!==o.sparse){var L=F.SCALAR,R=P[o.sparse.indices.componentType],A=o.sparse.indices.byteOffset||0,E=o.sparse.values.byteOffset||0,_=new R(e[1],A,o.sparse.count*L),I=new h(e[2],E,o.sparse.count*m);null!==d&&(c=new n.BufferAttribute(c.array.slice(),c.itemSize,c.normalized));for(var i=0,O=_.length;i<O;i++){var U=_[i];if(c.setX(U,I[i*m]),m>=2&&c.setY(U,I[i*m+1]),m>=3&&c.setZ(U,I[i*m+2]),m>=4&&c.setW(U,I[i*m+3]),m>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return c}))},Y.prototype.loadTexture=function(e){var source,t=this,o=this.json,l=this.options,c=this.textureLoader,d=window.URL||window.webkitURL,m=o.textures[e],h=m.extensions||{},f=(source=h[r.MSFT_TEXTURE_DDS]?o.images[h[r.MSFT_TEXTURE_DDS].source]:o.images[m.source]).uri,v=!1;return void 0!==source.bufferView&&(f=t.getDependency("bufferView",source.bufferView).then((function(e){v=!0;var t=new Blob([e],{type:source.mimeType});return f=d.createObjectURL(t)}))),Promise.resolve(f).then((function(e){var n=l.manager.getHandler(e);return n||(n=h[r.MSFT_TEXTURE_DDS]?t.extensions[r.MSFT_TEXTURE_DDS].ddsLoader:c),new Promise((function(t,r){n.load(K(e,l.path),t,void 0,r)}))})).then((function(e){!0===v&&d.revokeObjectURL(f),e.flipY=!1,void 0!==m.name&&(e.name=m.name),source.mimeType in B&&(e.format=B[source.mimeType]);var t=(o.samplers||{})[m.sampler]||{};return e.magFilter=O[t.magFilter]||n.LinearFilter,e.minFilter=O[t.minFilter]||n.LinearMipmapLinearFilter,e.wrapS=U[t.wrapS]||n.RepeatWrapping,e.wrapT=U[t.wrapT]||n.RepeatWrapping,e}))},Y.prototype.assignTexture=function(e,t,o){var l=this;return this.getDependency("texture",o.index).then((function(c){if(!c.isCompressedTexture)switch(t){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":c.format=n.RGBFormat}if(l.extensions[r.KHR_TEXTURE_TRANSFORM]){var d=void 0!==o.extensions?o.extensions[r.KHR_TEXTURE_TRANSFORM]:void 0;d&&(c=l.extensions[r.KHR_TEXTURE_TRANSFORM].extendTexture(c,d))}e[t]=c}))},Y.prototype.assignFinalMaterial=function(e){var t=e.geometry,o=e.material,l=this.extensions,c=void 0!==t.attributes.tangent,d=void 0!==t.attributes.color,m=void 0===t.attributes.normal,h=!0===e.isSkinnedMesh,f=Object.keys(t.morphAttributes).length>0,v=f&&void 0!==t.morphAttributes.normal;if(e.isPoints){var M="PointsMaterial:"+o.uuid,y=this.cache.get(M);y||(y=new n.PointsMaterial,n.Material.prototype.copy.call(y,o),y.color.copy(o.color),y.map=o.map,y.sizeAttenuation=!1,this.cache.add(M,y)),o=y}else if(e.isLine){M="LineBasicMaterial:"+o.uuid;var T=this.cache.get(M);T||(T=new n.LineBasicMaterial,n.Material.prototype.copy.call(T,o),T.color.copy(o.color),this.cache.add(M,T)),o=T}if(c||d||m||h||f){M="ClonedMaterial:"+o.uuid+":";o.isGLTFSpecularGlossinessMaterial&&(M+="specular-glossiness:"),h&&(M+="skinning:"),c&&(M+="vertex-tangents:"),d&&(M+="vertex-colors:"),m&&(M+="flat-shading:"),f&&(M+="morph-targets:"),v&&(M+="morph-normals:");var w=this.cache.get(M);w||(w=o.isGLTFSpecularGlossinessMaterial?l[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(o):o.clone(),h&&(w.skinning=!0),c&&(w.vertexTangents=!0),d&&(w.vertexColors=n.VertexColors),m&&(w.flatShading=!0),f&&(w.morphTargets=!0),v&&(w.morphNormals=!0),this.cache.add(M,w)),o=w}o.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),t.setAttribute("uv2",new n.BufferAttribute(t.attributes.uv.array,2))),o.isGLTFSpecularGlossinessMaterial&&(e.onBeforeRender=l[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),e.material=o},Y.prototype.loadMaterial=function(e){var t,o=this.json,l=this.extensions,c=o.materials[e],d={},m=c.extensions||{},h=[];if(m[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var f=l[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=f.getMaterialType(),h.push(f.extendParams(d,c,this))}else if(m[r.KHR_MATERIALS_UNLIT]){var v=l[r.KHR_MATERIALS_UNLIT];t=v.getMaterialType(),h.push(v.extendParams(d,c,this))}else{t=n.MeshStandardMaterial;var M=c.pbrMetallicRoughness||{};if(d.color=new n.Color(1,1,1),d.opacity=1,Array.isArray(M.baseColorFactor)){var y=M.baseColorFactor;d.color.fromArray(y),d.opacity=y[3]}void 0!==M.baseColorTexture&&h.push(this.assignTexture(d,"map",M.baseColorTexture)),d.metalness=void 0!==M.metallicFactor?M.metallicFactor:1,d.roughness=void 0!==M.roughnessFactor?M.roughnessFactor:1,void 0!==M.metallicRoughnessTexture&&(h.push(this.assignTexture(d,"metalnessMap",M.metallicRoughnessTexture)),h.push(this.assignTexture(d,"roughnessMap",M.metallicRoughnessTexture)))}!0===c.doubleSided&&(d.side=n.DoubleSide);var T=c.alphaMode||G;return T===k?d.transparent=!0:(d.transparent=!1,T===D&&(d.alphaTest=void 0!==c.alphaCutoff?c.alphaCutoff:.5)),void 0!==c.normalTexture&&t!==n.MeshBasicMaterial&&(h.push(this.assignTexture(d,"normalMap",c.normalTexture)),d.normalScale=new n.Vector2(1,1),void 0!==c.normalTexture.scale&&d.normalScale.set(c.normalTexture.scale,c.normalTexture.scale)),void 0!==c.occlusionTexture&&t!==n.MeshBasicMaterial&&(h.push(this.assignTexture(d,"aoMap",c.occlusionTexture)),void 0!==c.occlusionTexture.strength&&(d.aoMapIntensity=c.occlusionTexture.strength)),void 0!==c.emissiveFactor&&t!==n.MeshBasicMaterial&&(d.emissive=(new n.Color).fromArray(c.emissiveFactor)),void 0!==c.emissiveTexture&&t!==n.MeshBasicMaterial&&h.push(this.assignTexture(d,"emissiveMap",c.emissiveTexture)),Promise.all(h).then((function(){var e;return e=t===n.ShaderMaterial?l[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(d):new t(d),void 0!==c.name&&(e.name=c.name),e.map&&(e.map.encoding=n.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=n.sRGBEncoding),e.specularMap&&(e.specularMap.encoding=n.sRGBEncoding),z(e,c),c.extensions&&j(l,e,c),e}))},Y.prototype.loadGeometries=function(e){var t=this,o=this.extensions,l=this.primitiveCache;function c(e){return o[r.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(r){return W(r,e,t)}))}for(var d,m,h=[],i=0,f=e.length;i<f;i++){var v,M=e[i],y=(m=void 0,(m=(d=M).extensions&&d.extensions[r.KHR_DRACO_MESH_COMPRESSION])?"draco:"+m.bufferView+":"+m.indices+":"+X(m.attributes):d.indices+":"+X(d.attributes)+":"+d.mode),T=l[y];if(T)h.push(T.promise);else v=M.extensions&&M.extensions[r.KHR_DRACO_MESH_COMPRESSION]?c(M):W(new n.BufferGeometry,M,t),l[y]={primitive:M,promise:v},h.push(v)}return Promise.all(h)},Y.prototype.loadMesh=function(e){for(var t=this,r=this.json.meshes[e],o=r.primitives,l=[],i=0,c=o.length;i<c;i++){var d=void 0===o[i].material?S=S||new n.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:n.FrontSide}):this.getDependency("material",o[i].material);l.push(d)}return Promise.all(l).then((function(l){return t.loadGeometries(o).then((function(c){for(var d=[],i=0,m=c.length;i<m;i++){var h,f=c[i],v=o[i],M=l[i];if(v.mode===E||v.mode===_||v.mode===I||void 0===v.mode)!0!==(h=!0===r.isSkinnedMesh?new n.SkinnedMesh(f,M):new n.Mesh(f,M)).isSkinnedMesh||h.geometry.attributes.skinWeight.normalized||h.normalizeSkinWeights(),v.mode===_?h.drawMode=n.TriangleStripDrawMode:v.mode===I&&(h.drawMode=n.TriangleFanDrawMode);else if(v.mode===L)h=new n.LineSegments(f,M);else if(v.mode===A)h=new n.Line(f,M);else if(v.mode===R)h=new n.LineLoop(f,M);else{if(v.mode!==x)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);h=new n.Points(f,M)}Object.keys(h.geometry.morphAttributes).length>0&&V(h,r),h.name=r.name||"mesh_"+e,c.length>1&&(h.name+="_"+i),z(h,r),t.assignFinalMaterial(h),d.push(h)}if(1===d.length)return d[0];var y=new n.Group;for(i=0,m=d.length;i<m;i++)y.add(d[i]);return y}))}))},Y.prototype.loadCamera=function(e){var t,r=this.json.cameras[e],o=r[r.type];if(o)return"perspective"===r.type?t=new n.PerspectiveCamera(n.Math.radToDeg(o.yfov),o.aspectRatio||1,o.znear||1,o.zfar||2e6):"orthographic"===r.type&&(t=new n.OrthographicCamera(o.xmag/-2,o.xmag/2,o.ymag/2,o.ymag/-2,o.znear,o.zfar)),void 0!==r.name&&(t.name=r.name),z(t,r),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},Y.prototype.loadSkin=function(e){var t=this.json.skins[e],r={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return r.inverseBindMatrices=e,r}))},Y.prototype.loadAnimation=function(e){for(var t=this.json.animations[e],r=[],o=[],l=[],c=[],d=[],i=0,m=t.channels.length;i<m;i++){var h=t.channels[i],f=t.samplers[h.sampler],v=h.target,M=void 0!==v.node?v.node:v.id,input=void 0!==t.parameters?t.parameters[f.input]:f.input,output=void 0!==t.parameters?t.parameters[f.output]:f.output;r.push(this.getDependency("node",M)),o.push(this.getDependency("accessor",input)),l.push(this.getDependency("accessor",output)),c.push(f),d.push(v)}return Promise.all([Promise.all(r),Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(d)]).then((function(r){for(var o=r[0],l=r[1],c=r[2],d=r[3],m=r[4],h=[],i=0,f=o.length;i<f;i++){var v=o[i],M=l[i],y=c[i],T=d[i],S=m[i];if(void 0!==v){var x;switch(v.updateMatrix(),v.matrixAutoUpdate=!0,N[S.path]){case N.weights:x=n.NumberKeyframeTrack;break;case N.rotation:x=n.QuaternionKeyframeTrack;break;case N.position:case N.scale:default:x=n.VectorKeyframeTrack}var L=v.name?v.name:v.uuid,R=void 0!==T.interpolation?H[T.interpolation]:n.InterpolateLinear,A=[];N[S.path]===N.weights?v.traverse((function(object){!0===object.isMesh&&object.morphTargetInfluences&&A.push(object.name?object.name:object.uuid)})):A.push(L);var E=y.array;if(y.normalized){var _;if(E.constructor===Int8Array)_=1/127;else if(E.constructor===Uint8Array)_=1/255;else if(E.constructor==Int16Array)_=1/32767;else{if(E.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");_=1/65535}for(var I=new Float32Array(E.length),P=0,O=E.length;P<O;P++)I[P]=E[P]*_;E=I}for(P=0,O=A.length;P<O;P++){var track=new x(A[P]+"."+N[S.path],M.array,E,R);"CUBICSPLINE"===T.interpolation&&(track.createInterpolant=function(e){return new w(this.times,this.values,this.getValueSize()/3,e)},track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),h.push(track)}}}var U=void 0!==t.name?t.name:"animation_"+e;return new n.AnimationClip(U,void 0,h)}))},Y.prototype.loadNode=function(e){var t,o=this.json,l=this.extensions,c=this,d=o.meshReferences,m=o.meshUses,h=o.nodes[e];return(t=[],void 0!==h.mesh&&t.push(c.getDependency("mesh",h.mesh).then((function(e){var t;if(d[h.mesh]>1){var r=m[h.mesh]++;(t=e.clone()).name+="_instance_"+r,t.onBeforeRender=e.onBeforeRender;for(var i=0,n=t.children.length;i<n;i++)t.children[i].name+="_instance_"+r,t.children[i].onBeforeRender=e.children[i].onBeforeRender}else t=e;return void 0!==h.weights&&t.traverse((function(e){if(e.isMesh)for(var i=0,t=h.weights.length;i<t;i++)e.morphTargetInfluences[i]=h.weights[i]})),t}))),void 0!==h.camera&&t.push(c.getDependency("camera",h.camera)),h.extensions&&h.extensions[r.KHR_LIGHTS_PUNCTUAL]&&void 0!==h.extensions[r.KHR_LIGHTS_PUNCTUAL].light&&t.push(c.getDependency("light",h.extensions[r.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(t)).then((function(e){var t;if((t=!0===h.isBone?new n.Bone:e.length>1?new n.Group:1===e.length?e[0]:new n.Object3D)!==e[0])for(var i=0,r=e.length;i<r;i++)t.add(e[i]);if(void 0!==h.name&&(t.userData.name=h.name,t.name=n.PropertyBinding.sanitizeNodeName(h.name)),z(t,h),h.extensions&&j(l,t,h),void 0!==h.matrix){var o=new n.Matrix4;o.fromArray(h.matrix),t.applyMatrix(o)}else void 0!==h.translation&&t.position.fromArray(h.translation),void 0!==h.rotation&&t.quaternion.fromArray(h.rotation),void 0!==h.scale&&t.scale.fromArray(h.scale);return t}))},Y.prototype.loadScene=function(){function e(t,r,o,l){var c=o.nodes[t];return l.getDependency("node",t).then((function(e){return void 0===c.skin?e:l.getDependency("skin",c.skin).then((function(e){for(var r=[],i=0,n=(t=e).joints.length;i<n;i++)r.push(l.getDependency("node",t.joints[i]));return Promise.all(r)})).then((function(r){return e.traverse((function(e){if(e.isMesh){for(var o=[],l=[],c=0,d=r.length;c<d;c++){var m=r[c];if(m){o.push(m);var h=new n.Matrix4;void 0!==t.inverseBindMatrices&&h.fromArray(t.inverseBindMatrices.array,16*c),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}e.bind(new n.Skeleton(o,l),e.matrixWorld)}})),e}));var t})).then((function(t){r.add(t);var n=[];if(c.children)for(var d=c.children,i=0,m=d.length;i<m;i++){var h=d[i];n.push(e(h,t,o,l))}return Promise.all(n)}))}return function(t){var r=this.json,o=this.extensions,l=this.json.scenes[t],c=new n.Scene;void 0!==l.name&&(c.name=l.name),z(c,l),l.extensions&&j(o,c,l);for(var d=l.nodes||[],m=[],i=0,h=d.length;i<h;i++)m.push(e(d[i],c,r,this));return Promise.all(m).then((function(){return c}))}}(),e}()}}]);